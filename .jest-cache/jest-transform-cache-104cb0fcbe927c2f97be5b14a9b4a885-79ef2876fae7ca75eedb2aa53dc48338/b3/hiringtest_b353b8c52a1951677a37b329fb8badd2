63c25997e256d0400ca94d2e18e6ba62
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock de Firebase
jest.mock('../utils/firebase', () => ({
    db: {
        collection: jest.fn()
    }
}));
const hiringService_1 = require("../services/hiringService");
const firebase_1 = require("../utils/firebase");
describe('HiringService', () => {
    let hiringService;
    let mockCollection;
    beforeEach(() => {
        hiringService = new hiringService_1.HiringService();
        mockCollection = firebase_1.db.collection;
        jest.clearAllMocks();
    });
    describe('createHiringRequest', () => {
        const mockHiringData = {
            eventId: 'event123',
            eventCreatorId: 'creator123',
            musicianId: 'musician123',
            eventDetails: 'Evento de música en vivo',
            terms: 'Pago por adelantado'
        };
        const mockHiringRequest = {
            id: 'hiring123',
            eventId: 'event123',
            eventCreatorId: 'creator123',
            musicianId: 'musician123',
            status: 'pending',
            eventDetails: 'Evento de música en vivo',
            terms: 'Pago por adelantado',
            messages: [],
            createdAt: new Date(),
            updatedAt: new Date()
        };
        it('should create a hiring request successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock de las colecciones
            const mockEventDoc = {
                exists: true,
                data: () => ({ title: 'Evento Test' })
            };
            const mockMusicianDoc = {
                exists: true,
                data: () => ({ name: 'Juan', lastName: 'Pérez', roll: 'musico' })
            };
            const mockExistingRequest = {
                empty: true
            };
            const mockDocRef = {
                id: 'hiring123'
            };
            mockCollection
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockEventDoc)
                })
            })
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockMusicianDoc)
                })
            })
                .mockReturnValueOnce({
                where: jest.fn().mockReturnThis(),
                get: jest.fn().mockResolvedValue(mockExistingRequest)
            })
                .mockReturnValueOnce({
                add: jest.fn().mockResolvedValue(mockDocRef)
            })
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue({
                        exists: true,
                        id: 'hiring123',
                        data: () => mockHiringRequest
                    })
                })
            });
            const result = yield hiringService.createHiringRequest(mockHiringData);
            expect(result).toEqual(Object.assign(Object.assign({}, mockHiringRequest), { id: 'hiring123' }));
        }));
        it('should throw error when event not found', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockEventDoc = {
                exists: false
            };
            mockCollection.mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockEventDoc)
                })
            });
            yield expect(hiringService.createHiringRequest(mockHiringData))
                .rejects.toThrow('Evento no encontrado');
        }));
        it('should throw error when musician not found', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockEventDoc = {
                exists: true,
                data: () => ({ title: 'Evento Test' })
            };
            const mockMusicianDoc = {
                exists: false
            };
            mockCollection
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockEventDoc)
                })
            })
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockMusicianDoc)
                })
            });
            yield expect(hiringService.createHiringRequest(mockHiringData))
                .rejects.toThrow('Músico no encontrado');
        }));
        it('should throw error when active request already exists', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockEventDoc = {
                exists: true,
                data: () => ({ title: 'Evento Test' })
            };
            const mockMusicianDoc = {
                exists: true,
                data: () => ({ name: 'Juan', lastName: 'Pérez', roll: 'musico' })
            };
            const mockExistingRequest = {
                empty: false
            };
            mockCollection
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockEventDoc)
                })
            })
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockMusicianDoc)
                })
            })
                .mockReturnValueOnce({
                where: jest.fn().mockReturnThis(),
                get: jest.fn().mockResolvedValue(mockExistingRequest)
            });
            yield expect(hiringService.createHiringRequest(mockHiringData))
                .rejects.toThrow('Ya existe una solicitud activa para este evento y músico');
        }));
    });
    describe('getHiringRequestById', () => {
        it('should return hiring request when found', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => ({
                    eventId: 'event123',
                    eventCreatorId: 'creator123',
                    musicianId: 'musician123',
                    status: 'pending',
                    eventDetails: 'Evento de música',
                    terms: 'Pago por adelantado',
                    messages: [],
                    createdAt: new Date(),
                    updatedAt: new Date()
                })
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc)
                })
            });
            const result = yield hiringService.getHiringRequestById('hiring123');
            expect(result).toEqual(expect.objectContaining({
                eventCreatorId: 'creator123',
                musicianId: 'musician123',
                eventId: 'event123',
                eventDetails: 'Evento de música',
                terms: 'Pago por adelantado',
                status: 'pending',
                messages: [],
                id: 'hiring123'
            }));
        }));
        it('should return null when hiring request not found', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: false
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc)
                })
            });
            const result = yield hiringService.getHiringRequestById('hiring123');
            expect(result).toBeNull();
        }));
    });
    describe('updateHiringRequestStatus', () => {
        const mockHiringRequest = {
            id: 'hiring123',
            eventId: 'event123',
            eventCreatorId: 'creator123',
            musicianId: 'musician123',
            status: 'pending',
            eventDetails: 'Evento de música',
            terms: 'Pago por adelantado',
            messages: [],
            createdAt: new Date(),
            updatedAt: new Date()
        };
        it('should update hiring request status successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => mockHiringRequest
            };
            mockCollection
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc)
                })
            })
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    update: jest.fn().mockResolvedValue(undefined)
                })
            })
                .mockReturnValueOnce({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue({
                        exists: true,
                        id: 'hiring123',
                        data: () => (Object.assign(Object.assign({}, mockHiringRequest), { status: 'accepted' }))
                    })
                })
            });
            const result = yield hiringService.updateHiringRequestStatus('hiring123', 'accepted', 'musician123');
            expect(result.status).toBe('accepted');
        }));
        it('should throw error when hiring request not found', () => __awaiter(void 0, void 0, void 0, function* () {
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue({ exists: false })
                })
            });
            yield expect(hiringService.updateHiringRequestStatus('hiring123', 'accepted', 'musician123')).rejects.toThrow('Solicitud de contratación no encontrada');
        }));
        it('should throw error when user has no permissions', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => mockHiringRequest
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc)
                })
            });
            yield expect(hiringService.updateHiringRequestStatus('hiring123', 'accepted', 'other123')).rejects.toThrow('No tienes permisos para actualizar esta solicitud');
        }));
        it('should throw error for invalid status transition', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => (Object.assign(Object.assign({}, mockHiringRequest), { status: 'completed' }))
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc)
                })
            });
            yield expect(hiringService.updateHiringRequestStatus('hiring123', 'accepted', 'musician123')).rejects.toThrow('Transición de estado inválida');
        }));
    });
    describe('getHiringRequestsByUser', () => {
        const mockRequests = [
            {
                id: 'hiring1',
                eventId: 'event1',
                eventCreatorId: 'creator1',
                musicianId: 'musician123',
                status: 'pending',
                eventDetails: 'Evento 1',
                terms: 'Términos 1',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            },
            {
                id: 'hiring2',
                eventId: 'event2',
                eventCreatorId: 'creator2',
                musicianId: 'musician123',
                status: 'accepted',
                eventDetails: 'Evento 2',
                terms: 'Términos 2',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            }
        ];
        it('should return hiring requests for musician', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockSnapshot = {
                docs: mockRequests.map(req => ({
                    id: req.id,
                    data: () => req
                }))
            };
            mockCollection.mockReturnValue({
                where: jest.fn().mockReturnThis(),
                orderBy: jest.fn().mockReturnThis(),
                get: jest.fn().mockResolvedValue(mockSnapshot)
            });
            const result = yield hiringService.getHiringRequestsByUser('musician123', 'musico');
            expect(result).toHaveLength(2);
            expect(result[0].id).toBe('hiring1');
            expect(result[1].id).toBe('hiring2');
        }));
        it('should return hiring requests for event creator', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockSnapshot = {
                docs: mockRequests.map(req => ({
                    id: req.id,
                    data: () => req
                }))
            };
            mockCollection.mockReturnValue({
                where: jest.fn().mockReturnThis(),
                orderBy: jest.fn().mockReturnThis(),
                get: jest.fn().mockResolvedValue(mockSnapshot)
            });
            const result = yield hiringService.getHiringRequestsByUser('creator1', 'eventCreator');
            expect(result).toHaveLength(2);
        }));
        it('should filter by status when provided', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockSnapshot = {
                docs: [mockRequests[0]].map(req => ({
                    id: req.id,
                    data: () => req
                }))
            };
            mockCollection.mockReturnValue({
                where: jest.fn().mockReturnThis(),
                orderBy: jest.fn().mockReturnThis(),
                get: jest.fn().mockResolvedValue(mockSnapshot)
            });
            const result = yield hiringService.getHiringRequestsByUser('musician123', 'musico', 'pending');
            expect(result).toHaveLength(1);
            expect(result[0].status).toBe('pending');
        }));
    });
    describe('addMessage', () => {
        const mockHiringRequest = {
            id: 'hiring123',
            eventId: 'event123',
            eventCreatorId: 'creator123',
            musicianId: 'musician123',
            status: 'pending',
            eventDetails: 'Evento de música',
            terms: 'Pago por adelantado',
            messages: [],
            createdAt: new Date(),
            updatedAt: new Date()
        };
        it('should add message successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => mockHiringRequest
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc),
                    update: jest.fn().mockResolvedValue(undefined)
                })
            });
            const result = yield hiringService.addMessage('hiring123', 'musician123', 'musician', 'Hola, estoy interesado en el evento');
            expect(result.senderId).toBe('musician123');
            expect(result.senderType).toBe('musician');
            expect(result.content).toBe('Hola, estoy interesado en el evento');
            expect(result.isRead).toBe(false);
        }));
        it('should throw error when hiring request not found', () => __awaiter(void 0, void 0, void 0, function* () {
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue({ exists: false })
                })
            });
            yield expect(hiringService.addMessage('hiring123', 'musician123', 'musician', 'Hola')).rejects.toThrow('Solicitud de contratación no encontrada');
        }));
        it('should throw error when user has no permissions', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => mockHiringRequest
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc)
                })
            });
            yield expect(hiringService.addMessage('hiring123', 'other123', 'musician', 'Hola')).rejects.toThrow('No tienes permisos para enviar mensajes en esta solicitud');
        }));
    });
    describe('markMessagesAsRead', () => {
        const mockHiringRequest = {
            id: 'hiring123',
            eventId: 'event123',
            eventCreatorId: 'creator123',
            musicianId: 'musician123',
            status: 'pending',
            eventDetails: 'Evento de música',
            terms: 'Pago por adelantado',
            messages: [
                {
                    id: 'msg1',
                    senderId: 'musician123',
                    senderType: 'musician',
                    content: 'Hola',
                    timestamp: new Date(),
                    isRead: false
                }
            ],
            createdAt: new Date(),
            updatedAt: new Date()
        };
        it('should mark messages as read successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockDoc = {
                exists: true,
                id: 'hiring123',
                data: () => mockHiringRequest
            };
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue(mockDoc),
                    update: jest.fn().mockResolvedValue(undefined)
                })
            });
            yield expect(hiringService.markMessagesAsRead('hiring123', 'creator123')).resolves.toBeUndefined();
        }));
        it('should throw error when hiring request not found', () => __awaiter(void 0, void 0, void 0, function* () {
            mockCollection.mockReturnValue({
                doc: jest.fn().mockReturnValue({
                    get: jest.fn().mockResolvedValue({ exists: false })
                })
            });
            yield expect(hiringService.markMessagesAsRead('hiring123', 'creator123')).rejects.toThrow('Solicitud de contratación no encontrada');
        }));
    });
    describe('getHiringStats', () => {
        const mockRequests = [
            {
                id: 'hiring1',
                eventId: 'event1',
                eventCreatorId: 'creator1',
                musicianId: 'musician123',
                status: 'pending',
                eventDetails: 'Evento 1',
                terms: 'Términos 1',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            },
            {
                id: 'hiring2',
                eventId: 'event2',
                eventCreatorId: 'creator2',
                musicianId: 'musician123',
                status: 'accepted',
                eventDetails: 'Evento 2',
                terms: 'Términos 2',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            },
            {
                id: 'hiring3',
                eventId: 'event3',
                eventCreatorId: 'creator3',
                musicianId: 'musician123',
                status: 'rejected',
                eventDetails: 'Evento 3',
                terms: 'Términos 3',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            },
            {
                id: 'hiring4',
                eventId: 'event4',
                eventCreatorId: 'creator4',
                musicianId: 'musician123',
                status: 'completed',
                eventDetails: 'Evento 4',
                terms: 'Términos 4',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            },
            {
                id: 'hiring5',
                eventId: 'event5',
                eventCreatorId: 'creator5',
                musicianId: 'musician123',
                status: 'cancelled',
                eventDetails: 'Evento 5',
                terms: 'Términos 5',
                messages: [],
                createdAt: new Date(),
                updatedAt: new Date()
            }
        ];
        it('should return correct statistics', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockSnapshot = {
                docs: mockRequests.map(req => ({
                    id: req.id,
                    data: () => req
                }))
            };
            mockCollection.mockReturnValue({
                where: jest.fn().mockReturnThis(),
                orderBy: jest.fn().mockReturnThis(),
                get: jest.fn().mockResolvedValue(mockSnapshot)
            });
            const stats = yield hiringService.getHiringStats('musician123', 'musico');
            expect(stats.totalRequests).toBe(5);
            expect(stats.pendingRequests).toBe(1);
            expect(stats.acceptedRequests).toBe(1);
            expect(stats.rejectedRequests).toBe(1);
            expect(stats.completedRequests).toBe(1);
            expect(stats.averageResponseTime).toBe(0); // Sin mensajes de músicos
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXHNyY1xcQVBQX011c3Npa09uXFxBUFBfTXVzc2lrT25fRXhwcmVzc1xcc3JjXFxfX3Rlc3RzX19cXGhpcmluZy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBR0EsbUJBQW1CO0FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNwQyxFQUFFLEVBQUU7UUFDRixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUN0QjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBUkosNkRBQTBEO0FBQzFELGdEQUF1QztBQVN2QyxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtJQUM3QixJQUFJLGFBQTRCLENBQUM7SUFDakMsSUFBSSxjQUFnQyxDQUFDO0lBRXJDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxhQUFhLEdBQUcsSUFBSSw2QkFBYSxFQUFFLENBQUM7UUFDcEMsY0FBYyxHQUFHLGFBQUUsQ0FBQyxVQUE4QixDQUFDO1FBQ25ELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7UUFDbkMsTUFBTSxjQUFjLEdBQUc7WUFDckIsT0FBTyxFQUFFLFVBQVU7WUFDbkIsY0FBYyxFQUFFLFlBQVk7WUFDNUIsVUFBVSxFQUFFLGFBQWE7WUFDekIsWUFBWSxFQUFFLDBCQUEwQjtZQUN4QyxLQUFLLEVBQUUscUJBQXFCO1NBQzdCLENBQUM7UUFFRixNQUFNLGlCQUFpQixHQUFHO1lBQ3hCLEVBQUUsRUFBRSxXQUFXO1lBQ2YsT0FBTyxFQUFFLFVBQVU7WUFDbkIsY0FBYyxFQUFFLFlBQVk7WUFDNUIsVUFBVSxFQUFFLGFBQWE7WUFDekIsTUFBTSxFQUFFLFNBQWtCO1lBQzFCLFlBQVksRUFBRSwwQkFBMEI7WUFDeEMsS0FBSyxFQUFFLHFCQUFxQjtZQUM1QixRQUFRLEVBQUUsRUFBRTtZQUNaLFNBQVMsRUFBRSxJ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QUFDO1lBQ3ZDLE1BQU0sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMEJBQTBCO1FBQ3ZFLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxzcmNcXEFQUF9NdXNzaWtPblxcQVBQX011c3Npa09uX0V4cHJlc3NcXHNyY1xcX190ZXN0c19fXFxoaXJpbmcudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIaXJpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaGlyaW5nU2VydmljZSc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vdXRpbHMvZmlyZWJhc2UnO1xyXG5cclxuLy8gTW9jayBkZSBGaXJlYmFzZVxyXG5qZXN0Lm1vY2soJy4uL3V0aWxzL2ZpcmViYXNlJywgKCkgPT4gKHtcclxuICBkYjoge1xyXG4gICAgY29sbGVjdGlvbjogamVzdC5mbigpXHJcbiAgfVxyXG59KSk7XHJcblxyXG5kZXNjcmliZSgnSGlyaW5nU2VydmljZScsICgpID0+IHtcclxuICBsZXQgaGlyaW5nU2VydmljZTogSGlyaW5nU2VydmljZTtcclxuICBsZXQgbW9ja0NvbGxlY3Rpb246IGplc3QuTW9ja2VkPGFueT47XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgaGlyaW5nU2VydmljZSA9IG5ldyBIaXJpbmdTZXJ2aWNlKCk7XHJcbiAgICBtb2NrQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24gYXMgamVzdC5Nb2NrZWQ8YW55PjtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnY3JlYXRlSGlyaW5nUmVxdWVzdCcsICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tIaXJpbmdEYXRhID0ge1xyXG4gICAgICBldmVudElkOiAnZXZlbnQxMjMnLFxyXG4gICAgICBldmVudENyZWF0b3JJZDogJ2NyZWF0b3IxMjMnLFxyXG4gICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICBldmVudERldGFpbHM6ICdFdmVudG8gZGUgbcO6c2ljYSBlbiB2aXZvJyxcclxuICAgICAgdGVybXM6ICdQYWdvIHBvciBhZGVsYW50YWRvJ1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBtb2NrSGlyaW5nUmVxdWVzdCA9IHtcclxuICAgICAgaWQ6ICdoaXJpbmcxMjMnLFxyXG4gICAgICBldmVudElkOiAnZXZlbnQxMjMnLFxyXG4gICAgICBldmVudENyZWF0b3JJZDogJ2NyZWF0b3IxMjMnLFxyXG4gICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcclxuICAgICAgZXZlbnREZXRhaWxzOiAnRXZlbnRvIGRlIG3DunNpY2EgZW4gdml2bycsXHJcbiAgICAgIHRlcm1zOiAnUGFnbyBwb3IgYWRlbGFudGFkbycsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgIH07XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBoaXJpbmcgcmVxdWVzdCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgZGUgbGFzIGNvbGVjY2lvbmVzXHJcbiAgICAgIGNvbnN0IG1vY2tFdmVudERvYyA9IHtcclxuICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgZGF0YTogKCkgPT4gKHsgdGl0bGU6ICdFdmVudG8gVGVzdCcgfSlcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG1vY2tNdXNpY2lhbkRvYyA9IHtcclxuICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgZGF0YTogKCkgPT4gKHsgbmFtZTogJ0p1YW4nLCBsYXN0TmFtZTogJ1DDqXJleicsIHJvbGw6ICdtdXNpY28nIH0pXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrRXhpc3RpbmdSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGVtcHR5OiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBtb2NrRG9jUmVmID0ge1xyXG4gICAgICAgIGlkOiAnaGlyaW5nMTIzJ1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja0NvbGxlY3Rpb25cclxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XHJcbiAgICAgICAgICBkb2M6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRXZlbnREb2MpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xyXG4gICAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja011c2ljaWFuRG9jKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcclxuICAgICAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tFeGlzdGluZ1JlcXVlc3QpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XHJcbiAgICAgICAgICBhZGQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRG9jUmVmKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xyXG4gICAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgICAgIGV4aXN0czogdHJ1ZSxcclxuICAgICAgICAgICAgICBpZDogJ2hpcmluZzEyMycsXHJcbiAgICAgICAgICAgICAgZGF0YTogKCkgPT4gbW9ja0hpcmluZ1JlcXVlc3RcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoaXJpbmdTZXJ2aWNlLmNyZWF0ZUhpcmluZ1JlcXVlc3QobW9ja0hpcmluZ0RhdGEpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XHJcbiAgICAgICAgLi4ubW9ja0hpcmluZ1JlcXVlc3QsXHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxMjMnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIGV2ZW50IG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0V2ZW50RG9jID0ge1xyXG4gICAgICAgIGV4aXN0czogZmFsc2VcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vY2tDb2xsZWN0aW9uLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xyXG4gICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRXZlbnREb2MpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoaGlyaW5nU2VydmljZS5jcmVhdGVIaXJpbmdSZXF1ZXN0KG1vY2tIaXJpbmdEYXRhKSlcclxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdFdmVudG8gbm8gZW5jb250cmFkbycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIG11c2ljaWFuIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0V2ZW50RG9jID0ge1xyXG4gICAgICAgIGV4aXN0czogdHJ1ZSxcclxuICAgICAgICBkYXRhOiAoKSA9PiAoeyB0aXRsZTogJ0V2ZW50byBUZXN0JyB9KVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja011c2ljaWFuRG9jID0ge1xyXG4gICAgICAgIGV4aXN0czogZmFsc2VcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vY2tDb2xsZWN0aW9uXHJcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xyXG4gICAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0V2ZW50RG9jKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcclxuICAgICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tNdXNpY2lhbkRvYylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoaGlyaW5nU2VydmljZS5jcmVhdGVIaXJpbmdSZXF1ZXN0KG1vY2tIaXJpbmdEYXRhKSlcclxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdNw7pzaWNvIG5vIGVuY29udHJhZG8nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBhY3RpdmUgcmVxdWVzdCBhbHJlYWR5IGV4aXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0V2ZW50RG9jID0ge1xyXG4gICAgICAgIGV4aXN0czogdHJ1ZSxcclxuICAgICAgICBkYXRhOiAoKSA9PiAoeyB0aXRsZTogJ0V2ZW50byBUZXN0JyB9KVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbW9ja011c2ljaWFuRG9jID0ge1xyXG4gICAgICAgIGV4aXN0czogdHJ1ZSxcclxuICAgICAgICBkYXRhOiAoKSA9PiAoeyBuYW1lOiAnSnVhbicsIGxhc3ROYW1lOiAnUMOpcmV6Jywgcm9sbDogJ211c2ljbycgfSlcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG1vY2tFeGlzdGluZ1JlcXVlc3QgPSB7XHJcbiAgICAgICAgZW1wdHk6IGZhbHNlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvblxyXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcclxuICAgICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tFdmVudERvYylcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XHJcbiAgICAgICAgICBkb2M6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrTXVzaWNpYW5Eb2MpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xyXG4gICAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0V4aXN0aW5nUmVxdWVzdClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChoaXJpbmdTZXJ2aWNlLmNyZWF0ZUhpcmluZ1JlcXVlc3QobW9ja0hpcmluZ0RhdGEpKVxyXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ1lhIGV4aXN0ZSB1bmEgc29saWNpdHVkIGFjdGl2YSBwYXJhIGVzdGUgZXZlbnRvIHkgbcO6c2ljbycpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRIaXJpbmdSZXF1ZXN0QnlJZCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGhpcmluZyByZXF1ZXN0IHdoZW4gZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tEb2MgPSB7XHJcbiAgICAgICAgZXhpc3RzOiB0cnVlLFxyXG4gICAgICAgIGlkOiAnaGlyaW5nMTIzJyxcclxuICAgICAgICBkYXRhOiAoKSA9PiAoe1xyXG4gICAgICAgICAgZXZlbnRJZDogJ2V2ZW50MTIzJyxcclxuICAgICAgICAgIGV2ZW50Q3JlYXRvcklkOiAnY3JlYXRvcjEyMycsXHJcbiAgICAgICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgICBldmVudERldGFpbHM6ICdFdmVudG8gZGUgbcO6c2ljYScsXHJcbiAgICAgICAgICB0ZXJtczogJ1BhZ28gcG9yIGFkZWxhbnRhZG8nLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFtdLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vY2tDb2xsZWN0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEb2MpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoaXJpbmdTZXJ2aWNlLmdldEhpcmluZ1JlcXVlc3RCeUlkKCdoaXJpbmcxMjMnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgZXZlbnRDcmVhdG9ySWQ6ICdjcmVhdG9yMTIzJyxcclxuICAgICAgICAgIG11c2ljaWFuSWQ6ICdtdXNpY2lhbjEyMycsXHJcbiAgICAgICAgICBldmVudElkOiAnZXZlbnQxMjMnLFxyXG4gICAgICAgICAgZXZlbnREZXRhaWxzOiAnRXZlbnRvIGRlIG3DunNpY2EnLFxyXG4gICAgICAgICAgdGVybXM6ICdQYWdvIHBvciBhZGVsYW50YWRvJyxcclxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgICAgbWVzc2FnZXM6IFtdLFxyXG4gICAgICAgICAgaWQ6ICdoaXJpbmcxMjMnXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgd2hlbiBoaXJpbmcgcmVxdWVzdCBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tEb2MgPSB7XHJcbiAgICAgICAgZXhpc3RzOiBmYWxzZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja0NvbGxlY3Rpb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkb2M6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0RvYylcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhpcmluZ1NlcnZpY2UuZ2V0SGlyaW5nUmVxdWVzdEJ5SWQoJ2hpcmluZzEyMycpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgndXBkYXRlSGlyaW5nUmVxdWVzdFN0YXR1cycsICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tIaXJpbmdSZXF1ZXN0ID0ge1xyXG4gICAgICBpZDogJ2hpcmluZzEyMycsXHJcbiAgICAgIGV2ZW50SWQ6ICdldmVudDEyMycsXHJcbiAgICAgIGV2ZW50Q3JlYXRvcklkOiAnY3JlYXRvcjEyMycsXHJcbiAgICAgIG11c2ljaWFuSWQ6ICdtdXNpY2lhbjEyMycsXHJcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnIGFzIGNvbnN0LFxyXG4gICAgICBldmVudERldGFpbHM6ICdFdmVudG8gZGUgbcO6c2ljYScsXHJcbiAgICAgIHRlcm1zOiAnUGFnbyBwb3IgYWRlbGFudGFkbycsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgIH07XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgaGlyaW5nIHJlcXVlc3Qgc3RhdHVzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RvYyA9IHtcclxuICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxMjMnLFxyXG4gICAgICAgIGRhdGE6ICgpID0+IG1vY2tIaXJpbmdSZXF1ZXN0XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvblxyXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcclxuICAgICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEb2MpXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xyXG4gICAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcclxuICAgICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgaWQ6ICdoaXJpbmcxMjMnLFxyXG4gICAgICAgICAgICAgIGRhdGE6ICgpID0+ICh7IC4uLm1vY2tIaXJpbmdSZXF1ZXN0LCBzdGF0dXM6ICdhY2NlcHRlZCcgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoaXJpbmdTZXJ2aWNlLnVwZGF0ZUhpcmluZ1JlcXVlc3RTdGF0dXMoXHJcbiAgICAgICAgJ2hpcmluZzEyMycsXHJcbiAgICAgICAgJ2FjY2VwdGVkJyxcclxuICAgICAgICAnbXVzaWNpYW4xMjMnXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnYWNjZXB0ZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBoaXJpbmcgcmVxdWVzdCBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDb2xsZWN0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZXhpc3RzOiBmYWxzZSB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIGhpcmluZ1NlcnZpY2UudXBkYXRlSGlyaW5nUmVxdWVzdFN0YXR1cygnaGlyaW5nMTIzJywgJ2FjY2VwdGVkJywgJ211c2ljaWFuMTIzJylcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1NvbGljaXR1ZCBkZSBjb250cmF0YWNpw7NuIG5vIGVuY29udHJhZGEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiB1c2VyIGhhcyBubyBwZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RvYyA9IHtcclxuICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxMjMnLFxyXG4gICAgICAgIGRhdGE6ICgpID0+IG1vY2tIaXJpbmdSZXF1ZXN0XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRG9jKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIGhpcmluZ1NlcnZpY2UudXBkYXRlSGlyaW5nUmVxdWVzdFN0YXR1cygnaGlyaW5nMTIzJywgJ2FjY2VwdGVkJywgJ290aGVyMTIzJylcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ05vIHRpZW5lcyBwZXJtaXNvcyBwYXJhIGFjdHVhbGl6YXIgZXN0YSBzb2xpY2l0dWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIGludmFsaWQgc3RhdHVzIHRyYW5zaXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tEb2MgPSB7XHJcbiAgICAgICAgZXhpc3RzOiB0cnVlLFxyXG4gICAgICAgIGlkOiAnaGlyaW5nMTIzJyxcclxuICAgICAgICBkYXRhOiAoKSA9PiAoeyAuLi5tb2NrSGlyaW5nUmVxdWVzdCwgc3RhdHVzOiAnY29tcGxldGVkJyB9KVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja0NvbGxlY3Rpb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkb2M6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0RvYylcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBoaXJpbmdTZXJ2aWNlLnVwZGF0ZUhpcmluZ1JlcXVlc3RTdGF0dXMoJ2hpcmluZzEyMycsICdhY2NlcHRlZCcsICdtdXNpY2lhbjEyMycpXHJcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdUcmFuc2ljacOzbiBkZSBlc3RhZG8gaW52w6FsaWRhJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldEhpcmluZ1JlcXVlc3RzQnlVc2VyJywgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9ja1JlcXVlc3RzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxJyxcclxuICAgICAgICBldmVudElkOiAnZXZlbnQxJyxcclxuICAgICAgICBldmVudENyZWF0b3JJZDogJ2NyZWF0b3IxJyxcclxuICAgICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgIGV2ZW50RGV0YWlsczogJ0V2ZW50byAxJyxcclxuICAgICAgICB0ZXJtczogJ1TDqXJtaW5vcyAxJyxcclxuICAgICAgICBtZXNzYWdlczogW10sXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICdoaXJpbmcyJyxcclxuICAgICAgICBldmVudElkOiAnZXZlbnQyJyxcclxuICAgICAgICBldmVudENyZWF0b3JJZDogJ2NyZWF0b3IyJyxcclxuICAgICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICAgIHN0YXR1czogJ2FjY2VwdGVkJyxcclxuICAgICAgICBldmVudERldGFpbHM6ICdFdmVudG8gMicsXHJcbiAgICAgICAgdGVybXM6ICdUw6lybWlub3MgMicsXHJcbiAgICAgICAgbWVzc2FnZXM6IFtdLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBoaXJpbmcgcmVxdWVzdHMgZm9yIG11c2ljaWFuJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrU25hcHNob3QgPSB7XHJcbiAgICAgICAgZG9jczogbW9ja1JlcXVlc3RzLm1hcChyZXEgPT4gKHtcclxuICAgICAgICAgIGlkOiByZXEuaWQsXHJcbiAgICAgICAgICBkYXRhOiAoKSA9PiByZXFcclxuICAgICAgICB9KSlcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vY2tDb2xsZWN0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIG9yZGVyQnk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTbmFwc2hvdClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoaXJpbmdTZXJ2aWNlLmdldEhpcmluZ1JlcXVlc3RzQnlVc2VyKCdtdXNpY2lhbjEyMycsICdtdXNpY28nKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5pZCkudG9CZSgnaGlyaW5nMScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0WzFdLmlkKS50b0JlKCdoaXJpbmcyJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBoaXJpbmcgcmVxdWVzdHMgZm9yIGV2ZW50IGNyZWF0b3InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tTbmFwc2hvdCA9IHtcclxuICAgICAgICBkb2NzOiBtb2NrUmVxdWVzdHMubWFwKHJlcSA9PiAoe1xyXG4gICAgICAgICAgaWQ6IHJlcS5pZCxcclxuICAgICAgICAgIGRhdGE6ICgpID0+IHJlcVxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja0NvbGxlY3Rpb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgb3JkZXJCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja1NuYXBzaG90KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhpcmluZ1NlcnZpY2UuZ2V0SGlyaW5nUmVxdWVzdHNCeVVzZXIoJ2NyZWF0b3IxJywgJ2V2ZW50Q3JlYXRvcicpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgc3RhdHVzIHdoZW4gcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tTbmFwc2hvdCA9IHtcclxuICAgICAgICBkb2NzOiBbbW9ja1JlcXVlc3RzWzBdXS5tYXAocmVxID0+ICh7XHJcbiAgICAgICAgICBpZDogcmVxLmlkLFxyXG4gICAgICAgICAgZGF0YTogKCkgPT4gcmVxXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICBvcmRlckJ5OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU25hcHNob3QpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGlyaW5nU2VydmljZS5nZXRIaXJpbmdSZXF1ZXN0c0J5VXNlcignbXVzaWNpYW4xMjMnLCAnbXVzaWNvJywgJ3BlbmRpbmcnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5zdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnYWRkTWVzc2FnZScsICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tIaXJpbmdSZXF1ZXN0ID0ge1xyXG4gICAgICBpZDogJ2hpcmluZzEyMycsXHJcbiAgICAgIGV2ZW50SWQ6ICdldmVudDEyMycsXHJcbiAgICAgIGV2ZW50Q3JlYXRvcklkOiAnY3JlYXRvcjEyMycsXHJcbiAgICAgIG11c2ljaWFuSWQ6ICdtdXNpY2lhbjEyMycsXHJcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICBldmVudERldGFpbHM6ICdFdmVudG8gZGUgbcO6c2ljYScsXHJcbiAgICAgIHRlcm1zOiAnUGFnbyBwb3IgYWRlbGFudGFkbycsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgIH07XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhZGQgbWVzc2FnZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tEb2MgPSB7XHJcbiAgICAgICAgZXhpc3RzOiB0cnVlLFxyXG4gICAgICAgIGlkOiAnaGlyaW5nMTIzJyxcclxuICAgICAgICBkYXRhOiAoKSA9PiBtb2NrSGlyaW5nUmVxdWVzdFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja0NvbGxlY3Rpb24ubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICBkb2M6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0RvYyksXHJcbiAgICAgICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoaXJpbmdTZXJ2aWNlLmFkZE1lc3NhZ2UoXHJcbiAgICAgICAgJ2hpcmluZzEyMycsXHJcbiAgICAgICAgJ211c2ljaWFuMTIzJyxcclxuICAgICAgICAnbXVzaWNpYW4nLFxyXG4gICAgICAgICdIb2xhLCBlc3RveSBpbnRlcmVzYWRvIGVuIGVsIGV2ZW50bydcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2VuZGVySWQpLnRvQmUoJ211c2ljaWFuMTIzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2VuZGVyVHlwZSkudG9CZSgnbXVzaWNpYW4nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb250ZW50KS50b0JlKCdIb2xhLCBlc3RveSBpbnRlcmVzYWRvIGVuIGVsIGV2ZW50bycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzUmVhZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gaGlyaW5nIHJlcXVlc3Qgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrQ29sbGVjdGlvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGV4aXN0czogZmFsc2UgfSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBoaXJpbmdTZXJ2aWNlLmFkZE1lc3NhZ2UoJ2hpcmluZzEyMycsICdtdXNpY2lhbjEyMycsICdtdXNpY2lhbicsICdIb2xhJylcclxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1NvbGljaXR1ZCBkZSBjb250cmF0YWNpw7NuIG5vIGVuY29udHJhZGEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiB1c2VyIGhhcyBubyBwZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RvYyA9IHtcclxuICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxMjMnLFxyXG4gICAgICAgIGRhdGE6ICgpID0+IG1vY2tIaXJpbmdSZXF1ZXN0XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRG9jKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIGhpcmluZ1NlcnZpY2UuYWRkTWVzc2FnZSgnaGlyaW5nMTIzJywgJ290aGVyMTIzJywgJ211c2ljaWFuJywgJ0hvbGEnKVxyXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnTm8gdGllbmVzIHBlcm1pc29zIHBhcmEgZW52aWFyIG1lbnNhamVzIGVuIGVzdGEgc29saWNpdHVkJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ21hcmtNZXNzYWdlc0FzUmVhZCcsICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tIaXJpbmdSZXF1ZXN0ID0ge1xyXG4gICAgICBpZDogJ2hpcmluZzEyMycsXHJcbiAgICAgIGV2ZW50SWQ6ICdldmVudDEyMycsXHJcbiAgICAgIGV2ZW50Q3JlYXRvcklkOiAnY3JlYXRvcjEyMycsXHJcbiAgICAgIG11c2ljaWFuSWQ6ICdtdXNpY2lhbjEyMycsXHJcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICBldmVudERldGFpbHM6ICdFdmVudG8gZGUgbcO6c2ljYScsXHJcbiAgICAgIHRlcm1zOiAnUGFnbyBwb3IgYWRlbGFudGFkbycsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdtc2cxJyxcclxuICAgICAgICAgIHNlbmRlcklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICAgICAgc2VuZGVyVHlwZTogJ211c2ljaWFuJyBhcyBjb25zdCxcclxuICAgICAgICAgIGNvbnRlbnQ6ICdIb2xhJyxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGlzUmVhZDogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICB9O1xyXG5cclxuICAgIGl0KCdzaG91bGQgbWFyayBtZXNzYWdlcyBhcyByZWFkIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0RvYyA9IHtcclxuICAgICAgICBleGlzdHM6IHRydWUsXHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxMjMnLFxyXG4gICAgICAgIGRhdGE6ICgpID0+IG1vY2tIaXJpbmdSZXF1ZXN0XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIGRvYzogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRG9jKSxcclxuICAgICAgICAgIHVwZGF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChcclxuICAgICAgICBoaXJpbmdTZXJ2aWNlLm1hcmtNZXNzYWdlc0FzUmVhZCgnaGlyaW5nMTIzJywgJ2NyZWF0b3IxMjMnKVxyXG4gICAgICApLnJlc29sdmVzLnRvQmVVbmRlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiBoaXJpbmcgcmVxdWVzdCBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDb2xsZWN0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgZG9jOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIGdldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZXhpc3RzOiBmYWxzZSB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KFxyXG4gICAgICAgIGhpcmluZ1NlcnZpY2UubWFya01lc3NhZ2VzQXNSZWFkKCdoaXJpbmcxMjMnLCAnY3JlYXRvcjEyMycpXHJcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdTb2xpY2l0dWQgZGUgY29udHJhdGFjacOzbiBubyBlbmNvbnRyYWRhJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2dldEhpcmluZ1N0YXRzJywgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9ja1JlcXVlc3RzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICdoaXJpbmcxJyxcclxuICAgICAgICBldmVudElkOiAnZXZlbnQxJyxcclxuICAgICAgICBldmVudENyZWF0b3JJZDogJ2NyZWF0b3IxJyxcclxuICAgICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxyXG4gICAgICAgIGV2ZW50RGV0YWlsczogJ0V2ZW50byAxJyxcclxuICAgICAgICB0ZXJtczogJ1TDqXJtaW5vcyAxJyxcclxuICAgICAgICBtZXNzYWdlczogW10sXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICdoaXJpbmcyJyxcclxuICAgICAgICBldmVudElkOiAnZXZlbnQyJyxcclxuICAgICAgICBldmVudENyZWF0b3JJZDogJ2NyZWF0b3IyJyxcclxuICAgICAgICBtdXNpY2lhbklkOiAnbXVzaWNpYW4xMjMnLFxyXG4gICAgICAgIHN0YXR1czogJ2FjY2VwdGVkJyxcclxuICAgICAgICBldmVudERldGFpbHM6ICdFdmVudG8gMicsXHJcbiAgICAgICAgdGVybXM6ICdUw6lybWlub3MgMicsXHJcbiAgICAgICAgbWVzc2FnZXM6IFtdLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnaGlyaW5nMycsXHJcbiAgICAgICAgZXZlbnRJZDogJ2V2ZW50MycsXHJcbiAgICAgICAgZXZlbnRDcmVhdG9ySWQ6ICdjcmVhdG9yMycsXHJcbiAgICAgICAgbXVzaWNpYW5JZDogJ211c2ljaWFuMTIzJyxcclxuICAgICAgICBzdGF0dXM6ICdyZWplY3RlZCcsXHJcbiAgICAgICAgZXZlbnREZXRhaWxzOiAnRXZlbnRvIDMnLFxyXG4gICAgICAgIHRlcm1zOiAnVMOpcm1pbm9zIDMnLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJ2hpcmluZzQnLFxyXG4gICAgICAgIGV2ZW50SWQ6ICdldmVudDQnLFxyXG4gICAgICAgIGV2ZW50Q3JlYXRvcklkOiAnY3JlYXRvcjQnLFxyXG4gICAgICAgIG11c2ljaWFuSWQ6ICdtdXNpY2lhbjEyMycsXHJcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcclxuICAgICAgICBldmVudERldGFpbHM6ICdFdmVudG8gNCcsXHJcbiAgICAgICAgdGVybXM6ICdUw6lybWlub3MgNCcsXHJcbiAgICAgICAgbWVzc2FnZXM6IFtdLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGlkOiAnaGlyaW5nNScsXHJcbiAgICAgICAgZXZlbnRJZDogJ2V2ZW50NScsXHJcbiAgICAgICAgZXZlbnRDcmVhdG9ySWQ6ICdjcmVhdG9yNScsXHJcbiAgICAgICAgbXVzaWNpYW5JZDogJ211c2ljaWFuMTIzJyxcclxuICAgICAgICBzdGF0dXM6ICdjYW5jZWxsZWQnLFxyXG4gICAgICAgIGV2ZW50RGV0YWlsczogJ0V2ZW50byA1JyxcclxuICAgICAgICB0ZXJtczogJ1TDqXJtaW5vcyA1JyxcclxuICAgICAgICBtZXNzYWdlczogW10sXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcbiAgICBdO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvcnJlY3Qgc3RhdGlzdGljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1NuYXBzaG90ID0ge1xyXG4gICAgICAgIGRvY3M6IG1vY2tSZXF1ZXN0cy5tYXAocmVxID0+ICh7XHJcbiAgICAgICAgICBpZDogcmVxLmlkLFxyXG4gICAgICAgICAgZGF0YTogKCkgPT4gcmVxXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ29sbGVjdGlvbi5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICBvcmRlckJ5OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU25hcHNob3QpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBoaXJpbmdTZXJ2aWNlLmdldEhpcmluZ1N0YXRzKCdtdXNpY2lhbjEyMycsICdtdXNpY28nKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFJlcXVlc3RzKS50b0JlKDUpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMucGVuZGluZ1JlcXVlc3RzKS50b0JlKDEpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuYWNjZXB0ZWRSZXF1ZXN0cykudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLnJlamVjdGVkUmVxdWVzdHMpLnRvQmUoMSk7XHJcbiAgICAgIGV4cGVjdChzdGF0cy5jb21wbGV0ZWRSZXF1ZXN0cykudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmUoMCk7IC8vIFNpbiBtZW5zYWplcyBkZSBtw7pzaWNvc1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyAiXSwidmVyc2lvbiI6M30=