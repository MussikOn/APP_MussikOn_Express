{"version":3,"names":["cov_19681mud5a","actualCoverage","firebase_1","s","require","loggerService_1","PaymentService","constructor","f","supportedCurrencies","defaultCurrency","createPaymentMethod","userEmail","paymentData","logger","info","userId","metadata","paymentMethod","id","Date","now","Math","random","toString","substr","type","last4","brand","expiryMonth","expiryYear","isDefault","b","db","collection","doc","set","setDefaultPaymentMethod","paymentMethodId","error","getPaymentMethods","snapshot","where","orderBy","get","paymentMethods","forEach","push","Object","assign","data","batch","update","ref","commit","createPaymentIntent","userEmail_1","amount_1","amount","currency","description","paymentIntent","includes","status","createdAt","updatedAt","paymentIntentId","processPayment","success","paymentIntentRef","paymentIntentDoc","exists","Error","createInvoiceFromPayment","invoice","number","dueDate","paidAt","eventId","items","quantity","unitPrice","total","subtotal","tax","invoiceId","createInvoice","reduce","sum","item","map","index","getPaymentIntents","query","paymentIntents","getInvoices","invoices","markInvoiceAsPaid","invoiceRef","invoiceDoc","result","undefined","processRefund","reason","refund","refundId","getPaymentStats","period","startDate","getFullYear","getMonth","getTime","getDate","paymentQuery","paymentSnapshot","payments","docs","invoiceQuery","invoiceSnapshot","refundQuery","refundSnapshot","refunds","stats","totalRevenue","filter","p","totalTransactions","length","successfulTransactions","failedTransactions","totalInvoices","paidInvoices","i","totalRefunds","refundAmount","r","averageTransaction","successRate","validatePaymentMethod","cardNumber","cvc","replace","test","expiryDate","getPaymentGateways","gateways","name","isActive","config","fees","percentage","fixed","gateway","exports"],"sources":["C:\\src\\APP_MussikOn\\APP_MussikOn_Express\\src\\services\\paymentService.ts"],"sourcesContent":["import { db } from '../utils/firebase';\r\nimport { logger } from './loggerService';\r\nimport { FieldValue } from 'firebase-admin/firestore';\r\n\r\n// Interfaces para el sistema de pagos\r\nexport interface PaymentMethod {\r\n  id: string;\r\n  type: 'card' | 'bank_transfer' | 'paypal' | 'stripe';\r\n  last4?: string;\r\n  brand?: string;\r\n  expiryMonth?: number;\r\n  expiryYear?: number;\r\n  isDefault: boolean;\r\n  userEmail: string;\r\n}\r\n\r\nexport interface PaymentIntent {\r\n  id: string;\r\n  amount: number; // en centavos\r\n  currency: string;\r\n  status: 'pending' | 'processing' | 'succeeded' | 'failed' | 'cancelled';\r\n  paymentMethodId: string;\r\n  userEmail: string;\r\n  eventId?: string;\r\n  description: string;\r\n  metadata: Record<string, any>;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface Invoice {\r\n  id: string;\r\n  number: string;\r\n  amount: number;\r\n  currency: string;\r\n  status: 'draft' | 'sent' | 'paid' | 'overdue' | 'cancelled';\r\n  dueDate: Date;\r\n  paidAt?: Date;\r\n  userEmail: string;\r\n  eventId?: string;\r\n  items: InvoiceItem[];\r\n  subtotal: number;\r\n  tax: number;\r\n  total: number;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface InvoiceItem {\r\n  id: string;\r\n  description: string;\r\n  quantity: number;\r\n  unitPrice: number;\r\n  total: number;\r\n  type: 'service' | 'product' | 'fee';\r\n}\r\n\r\nexport interface PaymentGateway {\r\n  name: string;\r\n  isActive: boolean;\r\n  config: Record<string, any>;\r\n}\r\n\r\nexport interface Refund {\r\n  id: string;\r\n  paymentIntentId: string;\r\n  amount: number;\r\n  reason: string;\r\n  status: 'pending' | 'succeeded' | 'failed';\r\n  createdAt: Date;\r\n}\r\n\r\nexport class PaymentService {\r\n  private readonly supportedCurrencies = ['EUR', 'USD', 'GBP'];\r\n  private readonly defaultCurrency = 'EUR';\r\n\r\n  /**\r\n   * Crear un método de pago\r\n   */\r\n  async createPaymentMethod(\r\n    userEmail: string,\r\n    paymentData: any\r\n  ): Promise<PaymentMethod> {\r\n    try {\r\n      logger.info('Creando método de pago', {\r\n        userId: userEmail,\r\n        metadata: { paymentData },\r\n      });\r\n\r\n      // En producción, esto se integraría con Stripe/PayPal\r\n      const paymentMethod: PaymentMethod = {\r\n        id: `pm_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        type: paymentData.type,\r\n        last4: paymentData.last4,\r\n        brand: paymentData.brand,\r\n        expiryMonth: paymentData.expiryMonth,\r\n        expiryYear: paymentData.expiryYear,\r\n        isDefault: paymentData.isDefault || false,\r\n        userEmail,\r\n      };\r\n\r\n      await db\r\n        .collection('paymentMethods')\r\n        .doc(paymentMethod.id)\r\n        .set(paymentMethod);\r\n\r\n      // Si es el método por defecto, actualizar otros métodos\r\n      if (paymentMethod.isDefault) {\r\n        await this.setDefaultPaymentMethod(userEmail, paymentMethod.id);\r\n      }\r\n\r\n      logger.info('Método de pago creado', {\r\n        userId: userEmail,\r\n        metadata: { paymentMethodId: paymentMethod.id },\r\n      });\r\n\r\n      return paymentMethod;\r\n    } catch (error) {\r\n      logger.error('Error creando método de pago', error as Error, { userId: userEmail });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener métodos de pago de un usuario\r\n   */\r\n  async getPaymentMethods(userEmail: string): Promise<PaymentMethod[]> {\r\n    try {\r\n      const snapshot = await db\r\n        .collection('paymentMethods')\r\n        .where('userEmail', '==', userEmail)\r\n        .orderBy('isDefault', 'desc')\r\n        .get();\r\n\r\n      const paymentMethods: PaymentMethod[] = [];\r\n      snapshot.forEach((doc: any) => {\r\n        paymentMethods.push({ id: doc.id, ...doc.data() });\r\n      });\r\n\r\n      return paymentMethods;\r\n    } catch (error) {\r\n      logger.error('Error obteniendo métodos de pago', error as Error, {\r\n        userId: userEmail,\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Establecer método de pago por defecto\r\n   */\r\n  async setDefaultPaymentMethod(\r\n    userEmail: string,\r\n    paymentMethodId: string\r\n  ): Promise<void> {\r\n    try {\r\n      const batch = db.batch();\r\n\r\n      // Remover default de otros métodos\r\n      const snapshot = await db\r\n        .collection('paymentMethods')\r\n        .where('userEmail', '==', userEmail)\r\n        .where('isDefault', '==', true)\r\n        .get();\r\n\r\n      snapshot.forEach((doc: any) => {\r\n        batch.update(doc.ref, { isDefault: false });\r\n      });\r\n\r\n      // Establecer nuevo método por defecto\r\n      batch.update(db.collection('paymentMethods').doc(paymentMethodId), {\r\n        isDefault: true,\r\n      });\r\n\r\n      await batch.commit();\r\n\r\n      logger.info('Método de pago por defecto actualizado', {\r\n        userId: userEmail,\r\n        metadata: { paymentMethodId },\r\n      });\r\n    } catch (error) {\r\n      logger.error('Error estableciendo método por defecto', error as Error, {\r\n        userId: userEmail,\r\n        metadata: { paymentMethodId },\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Crear intento de pago\r\n   */\r\n  async createPaymentIntent(\r\n    userEmail: string,\r\n    amount: number,\r\n    currency: string = 'EUR',\r\n    description: string,\r\n    metadata: Record<string, any> = {}\r\n  ): Promise<PaymentIntent> {\r\n    try {\r\n      logger.info('Creando intento de pago', {\r\n        userId: userEmail,\r\n        metadata: { amount, currency, description },\r\n      });\r\n\r\n      const paymentIntent: PaymentIntent = {\r\n        id: `pi_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        amount,\r\n        currency: this.supportedCurrencies.includes(currency)\r\n          ? currency\r\n          : this.defaultCurrency,\r\n        status: 'pending',\r\n        paymentMethodId: '',\r\n        userEmail,\r\n        description,\r\n        metadata,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n      };\r\n\r\n      await db\r\n        .collection('paymentIntents')\r\n        .doc(paymentIntent.id)\r\n        .set(paymentIntent);\r\n\r\n      logger.info('Intento de pago creado', {\r\n        userId: userEmail,\r\n        metadata: { paymentIntentId: paymentIntent.id },\r\n      });\r\n\r\n      return paymentIntent;\r\n    } catch (error) {\r\n      logger.error('Error creando intento de pago', error as Error, {\r\n        userId: userEmail,\r\n        metadata: { amount },\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Procesar pago\r\n   */\r\n  async processPayment(\r\n    paymentIntentId: string,\r\n    paymentMethodId: string\r\n  ): Promise<PaymentIntent> {\r\n    try {\r\n      logger.info('Procesando pago', {\r\n        metadata: { paymentIntentId, paymentMethodId },\r\n      });\r\n\r\n      // Simular procesamiento de pago\r\n      const success = Math.random() > 0.1; // 90% de éxito\r\n\r\n      const paymentIntentRef = db\r\n        .collection('paymentIntents')\r\n        .doc(paymentIntentId);\r\n      const paymentIntentDoc = await paymentIntentRef.get();\r\n\r\n      if (!paymentIntentDoc.exists) {\r\n        throw new Error('Payment intent no encontrado');\r\n      }\r\n\r\n      const paymentIntent = paymentIntentDoc.data() as PaymentIntent;\r\n\r\n      if (success) {\r\n        // Pago exitoso\r\n        await paymentIntentRef.update({\r\n          status: 'succeeded',\r\n          paymentMethodId,\r\n          updatedAt: new Date(),\r\n        });\r\n\r\n        // Crear factura automáticamente\r\n        await this.createInvoiceFromPayment({\r\n          ...paymentIntent,\r\n          status: 'succeeded',\r\n          paymentMethodId,\r\n        });\r\n\r\n        logger.info('Pago procesado exitosamente', {\r\n          metadata: {\r\n            paymentIntentId,\r\n            amount: paymentIntent.amount,\r\n            currency: paymentIntent.currency,\r\n          },\r\n        });\r\n      } else {\r\n        // Pago fallido\r\n        await paymentIntentRef.update({\r\n          status: 'failed',\r\n          paymentMethodId,\r\n          updatedAt: new Date(),\r\n        });\r\n\r\n        logger.info('Pago fallido', { metadata: { paymentIntentId } });\r\n      }\r\n\r\n      return {\r\n        ...paymentIntent,\r\n        status: success ? 'succeeded' : 'failed',\r\n        paymentMethodId,\r\n        updatedAt: new Date(),\r\n      };\r\n    } catch (error) {\r\n      logger.error('Error procesando pago', error as Error, {\r\n        metadata: { paymentIntentId },\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Crear factura desde un pago\r\n   */\r\n  async createInvoiceFromPayment(\r\n    paymentIntent: PaymentIntent\r\n  ): Promise<Invoice> {\r\n    try {\r\n      const invoice: Invoice = {\r\n        id: `inv_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        number: `INV-${Date.now()}`,\r\n        amount: paymentIntent.amount,\r\n        currency: paymentIntent.currency,\r\n        status: 'paid',\r\n        dueDate: new Date(),\r\n        paidAt: new Date(),\r\n        userEmail: paymentIntent.userEmail,\r\n        eventId: paymentIntent.eventId,\r\n        items: [\r\n          {\r\n            id: `item_${Date.now()}`,\r\n            description: paymentIntent.description,\r\n            quantity: 1,\r\n            unitPrice: paymentIntent.amount,\r\n            total: paymentIntent.amount,\r\n            type: 'service',\r\n          },\r\n        ],\r\n        subtotal: paymentIntent.amount,\r\n        tax: 0,\r\n        total: paymentIntent.amount,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n      };\r\n\r\n      await db.collection('invoices').doc(invoice.id).set(invoice);\r\n\r\n      logger.info('Factura creada desde pago', {\r\n        metadata: {\r\n          invoiceId: invoice.id,\r\n          paymentIntentId: paymentIntent.id,\r\n        },\r\n      });\r\n\r\n      return invoice;\r\n    } catch (error) {\r\n      logger.error('Error creando factura desde pago', error as Error, {\r\n        metadata: { paymentIntent },\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Crear factura manual\r\n   */\r\n  async createInvoice(\r\n    userEmail: string,\r\n    items: Omit<InvoiceItem, 'id'>[],\r\n    dueDate: Date,\r\n    eventId?: string\r\n  ): Promise<Invoice> {\r\n    try {\r\n      logger.info('Creando factura manual', {\r\n        userId: userEmail,\r\n        metadata: { items, dueDate },\r\n      });\r\n\r\n      const subtotal = items.reduce(\r\n        (sum, item) => sum + item.quantity * item.unitPrice,\r\n        0\r\n      );\r\n      const tax = subtotal * 0.16; // 16% IVA\r\n      const total = subtotal + tax;\r\n\r\n      const invoice: Invoice = {\r\n        id: `inv_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        number: `INV-${Date.now()}`,\r\n        amount: total,\r\n        currency: this.defaultCurrency,\r\n        status: 'draft',\r\n        dueDate,\r\n        userEmail,\r\n        eventId,\r\n        items: items.map((item, index) => ({\r\n          id: `item_${Date.now()}_${index}`,\r\n          ...item,\r\n          total: item.quantity * item.unitPrice,\r\n        })),\r\n        subtotal,\r\n        tax,\r\n        total,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n      };\r\n\r\n      await db.collection('invoices').doc(invoice.id).set(invoice);\r\n\r\n      logger.info('Factura manual creada', {\r\n        userId: userEmail,\r\n        metadata: { invoiceId: invoice.id },\r\n      });\r\n\r\n      return invoice;\r\n    } catch (error) {\r\n      logger.error('Error creando factura manual', error as Error, { userId: userEmail });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener payment intents de un usuario\r\n   */\r\n  async getPaymentIntents(userEmail: string, status?: string): Promise<PaymentIntent[]> {\r\n    try {\r\n      let query = db.collection('paymentIntents').where('userEmail', '==', userEmail);\r\n\r\n      if (status) {\r\n        query = query.where('status', '==', status);\r\n      }\r\n\r\n      const snapshot = await query.orderBy('createdAt', 'desc').get();\r\n\r\n      const paymentIntents: PaymentIntent[] = [];\r\n      snapshot.forEach((doc: any) => {\r\n        paymentIntents.push({ id: doc.id, ...doc.data() });\r\n      });\r\n\r\n      return paymentIntents;\r\n    } catch (error) {\r\n      logger.error('Error obteniendo payment intents', error as Error, { userId: userEmail });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener facturas de un usuario\r\n   */\r\n  async getInvoices(userEmail: string, status?: string): Promise<Invoice[]> {\r\n    try {\r\n      let query = db.collection('invoices').where('userEmail', '==', userEmail);\r\n\r\n      if (status) {\r\n        query = query.where('status', '==', status);\r\n      }\r\n\r\n      const snapshot = await query.orderBy('createdAt', 'desc').get();\r\n\r\n      const invoices: Invoice[] = [];\r\n      snapshot.forEach((doc: any) => {\r\n        invoices.push({ id: doc.id, ...doc.data() });\r\n      });\r\n\r\n      return invoices;\r\n    } catch (error) {\r\n      logger.error('Error obteniendo facturas', error as Error, { userId: userEmail });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Marcar factura como pagada\r\n   */\r\n  async markInvoiceAsPaid(\r\n    invoiceId: string,\r\n    paymentMethodId: string\r\n  ): Promise<Invoice> {\r\n    try {\r\n      logger.info('Marcando factura como pagada', {\r\n        metadata: { invoiceId, paymentMethodId },\r\n      });\r\n\r\n      const invoiceRef = db.collection('invoices').doc(invoiceId);\r\n      const invoiceDoc = await invoiceRef.get();\r\n\r\n      if (!invoiceDoc.exists) {\r\n        throw new Error('Factura no encontrada');\r\n      }\r\n\r\n      const invoice = invoiceDoc.data() as Invoice;\r\n\r\n      // Crear payment intent para la factura\r\n      const paymentIntent = await this.createPaymentIntent(\r\n        invoice.userEmail,\r\n        invoice.total,\r\n        invoice.currency,\r\n        `Pago de factura ${invoice.number}`,\r\n        { invoiceId }\r\n      );\r\n\r\n      // Procesar el pago\r\n      const result = await this.processPayment(\r\n        paymentIntent.id,\r\n        paymentMethodId\r\n      );\r\n\r\n      if (result.status === 'succeeded') {\r\n        // Actualizar factura como pagada\r\n        await invoiceRef.update({\r\n          status: 'paid',\r\n          paidAt: new Date(),\r\n          updatedAt: new Date(),\r\n        });\r\n\r\n        logger.info('Factura marcada como pagada', { metadata: { invoiceId } });\r\n      }\r\n\r\n      return {\r\n        ...invoice,\r\n        status: result.status === 'succeeded' ? 'paid' : 'sent',\r\n        paidAt: result.status === 'succeeded' ? new Date() : undefined,\r\n        updatedAt: new Date(),\r\n      };\r\n    } catch (error) {\r\n      logger.error('Error marcando factura como pagada', error as Error, {\r\n        metadata: { invoiceId },\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Procesar reembolso\r\n   */\r\n  async processRefund(\r\n    paymentIntentId: string,\r\n    amount: number,\r\n    reason: string\r\n  ): Promise<Refund> {\r\n    try {\r\n      logger.info('Procesando reembolso', {\r\n        metadata: { paymentIntentId, amount, reason },\r\n      });\r\n\r\n      // Verificar que el payment intent existe y fue exitoso\r\n      const paymentIntentDoc = await db\r\n        .collection('paymentIntents')\r\n        .doc(paymentIntentId)\r\n        .get();\r\n\r\n      if (!paymentIntentDoc.exists) {\r\n        throw new Error('Payment intent no encontrado');\r\n      }\r\n\r\n      const paymentIntent = paymentIntentDoc.data() as PaymentIntent;\r\n\r\n      if (paymentIntent.status !== 'succeeded') {\r\n        throw new Error('Solo se pueden reembolsar pagos exitosos');\r\n      }\r\n\r\n      if (amount > paymentIntent.amount) {\r\n        throw new Error(\r\n          'El monto del reembolso no puede ser mayor al pago original'\r\n        );\r\n      }\r\n\r\n      // Simular procesamiento de reembolso\r\n      const success = Math.random() > 0.05; // 95% de éxito\r\n\r\n      const refund: Refund = {\r\n        id: `ref_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        paymentIntentId,\r\n        amount,\r\n        reason,\r\n        status: success ? 'succeeded' : 'failed',\r\n        createdAt: new Date(),\r\n      };\r\n\r\n      await db.collection('refunds').doc(refund.id).set(refund);\r\n\r\n      if (success) {\r\n        // Actualizar payment intent\r\n        await db.collection('paymentIntents').doc(paymentIntentId).update({\r\n          status: 'cancelled',\r\n          updatedAt: new Date(),\r\n        });\r\n      }\r\n\r\n      logger.info('Reembolso procesado', {\r\n        metadata: { refundId: refund.id, amount },\r\n      });\r\n\r\n      return refund;\r\n    } catch (error) {\r\n      logger.error('Error procesando reembolso', error as Error, {\r\n        metadata: { paymentIntentId },\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener estadísticas de pagos\r\n   */\r\n  async getPaymentStats(userId?: string, period?: string): Promise<any> {\r\n    try {\r\n      logger.info('Obteniendo estadísticas de pagos', {\r\n        metadata: { userId, period },\r\n      });\r\n\r\n      const now = new Date();\r\n      let startDate = new Date(now.getFullYear(), now.getMonth(), 1); // Inicio del mes\r\n\r\n      if (period === 'week') {\r\n        startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n      } else if (period === 'month') {\r\n        startDate = new Date(\r\n          now.getFullYear(),\r\n          now.getMonth() - 1,\r\n          now.getDate()\r\n        );\r\n      } else if (period === 'year') {\r\n        startDate = new Date(now.getFullYear(), 0, 1);\r\n      }\r\n\r\n      // Estadísticas de payment intents\r\n      let paymentQuery = db\r\n        .collection('paymentIntents')\r\n        .where('createdAt', '>=', startDate);\r\n\r\n      if (userId) {\r\n        paymentQuery = paymentQuery.where('userId', '==', userId);\r\n      }\r\n\r\n      const paymentSnapshot = await paymentQuery.get();\r\n      const payments = paymentSnapshot.docs.map(doc => doc.data());\r\n\r\n      // Estadísticas de facturas\r\n      let invoiceQuery = db\r\n        .collection('invoices')\r\n        .where('createdAt', '>=', startDate);\r\n\r\n      if (userId) {\r\n        invoiceQuery = invoiceQuery.where('userId', '==', userId);\r\n      }\r\n\r\n      const invoiceSnapshot = await invoiceQuery.get();\r\n      const invoices = invoiceSnapshot.docs.map(doc => doc.data());\r\n\r\n      // Estadísticas de reembolsos\r\n      const refundQuery = db\r\n        .collection('refunds')\r\n        .where('createdAt', '>=', startDate);\r\n\r\n      const refundSnapshot = await refundQuery.get();\r\n      const refunds = refundSnapshot.docs.map(doc => doc.data());\r\n\r\n      const stats = {\r\n        totalRevenue: payments\r\n          .filter((p: any) => p.status === 'succeeded')\r\n          .reduce((sum: number, p: any) => sum + p.amount, 0),\r\n        totalTransactions: payments.length,\r\n        successfulTransactions: payments.filter(\r\n          (p: any) => p.status === 'succeeded'\r\n        ).length,\r\n        failedTransactions: payments.filter((p: any) => p.status === 'failed')\r\n          .length,\r\n        totalInvoices: invoices.length,\r\n        paidInvoices: invoices.filter((i: any) => i.status === 'paid').length,\r\n        totalRefunds: refunds.length,\r\n        refundAmount: refunds\r\n          .filter((r: any) => r.status === 'succeeded')\r\n          .reduce((sum: number, r: any) => sum + r.amount, 0),\r\n        averageTransaction:\r\n          payments.length > 0\r\n            ? payments.reduce((sum: number, p: any) => sum + p.amount, 0) /\r\n              payments.length\r\n            : 0,\r\n        successRate:\r\n          payments.length > 0\r\n            ? (payments.filter((p: any) => p.status === 'succeeded').length /\r\n                payments.length) *\r\n              100\r\n            : 0,\r\n      };\r\n\r\n      logger.info('Estadísticas de pagos obtenidas', { metadata: { stats } });\r\n\r\n      return stats;\r\n    } catch (error) {\r\n      logger.error('Error obteniendo estadísticas de pagos', error as Error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validar método de pago\r\n   */\r\n  async validatePaymentMethod(paymentData: any): Promise<boolean> {\r\n    try {\r\n      // Validaciones básicas\r\n      if (\r\n        !paymentData.cardNumber ||\r\n        !paymentData.expiryMonth ||\r\n        !paymentData.expiryYear ||\r\n        !paymentData.cvc\r\n      ) {\r\n        return false;\r\n      }\r\n\r\n      // Validar formato de tarjeta (Luhn algorithm)\r\n      const cardNumber = paymentData.cardNumber.replace(/\\s/g, '');\r\n      if (!/^\\d{13,19}$/.test(cardNumber)) {\r\n        return false;\r\n      }\r\n\r\n      // Validar fecha de expiración\r\n      const now = new Date();\r\n      const expiryDate = new Date(\r\n        paymentData.expiryYear,\r\n        paymentData.expiryMonth - 1\r\n      );\r\n      if (expiryDate <= now) {\r\n        return false;\r\n      }\r\n\r\n      // Validar CVC\r\n      if (!/^\\d{3,4}$/.test(paymentData.cvc)) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      logger.error('Error validando método de pago', error as Error, {\r\n        metadata: { paymentData },\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener gateways de pago disponibles\r\n   */\r\n  async getPaymentGateways(): Promise<PaymentGateway[]> {\r\n    try {\r\n      const gateways: PaymentGateway[] = [\r\n        {\r\n          name: 'Stripe',\r\n          isActive: true,\r\n          config: {\r\n            supportedCurrencies: ['USD', 'EUR', 'GBP'],\r\n            fees: { percentage: 2.9, fixed: 30 },\r\n          },\r\n        },\r\n        {\r\n          name: 'PayPal',\r\n          isActive: true,\r\n          config: {\r\n            supportedCurrencies: ['USD', 'EUR', 'GBP'],\r\n            fees: { percentage: 3.5, fixed: 0 },\r\n          },\r\n        },\r\n        {\r\n          name: 'MercadoPago',\r\n          isActive: false,\r\n          config: {\r\n            supportedCurrencies: ['USD', 'ARS', 'BRL'],\r\n            fees: { percentage: 3.5, fixed: 0 },\r\n          },\r\n        },\r\n      ];\r\n\r\n      return gateways.filter(gateway => gateway.isActive);\r\n    } catch (error) {\r\n      logger.error('Error obteniendo pasarelas de pago', error as Error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}