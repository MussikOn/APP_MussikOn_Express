21c1a56dfe8336cfb706ebcd7f0dee90
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
// Mock de todas las dependencias
jest.mock('../models/authModel');
jest.mock('../utils/jwt');
jest.mock('../utils/mailer');
jest.mock('../utils/validatios');
jest.mock('bcrypt');
const bcrypt = __importStar(require("bcrypt"));
const authController_1 = require("../controllers/authController");
const authModel_1 = require("../models/authModel");
const jwt_1 = require("../utils/jwt");
const mailer_1 = require("../utils/mailer");
const validatios_1 = require("../utils/validatios");
const setup_1 = require("./setup");
describe('AuthController', () => {
    let mockRequest;
    let mockResponse;
    let mockJson;
    let mockStatus;
    beforeEach(() => {
        mockJson = jest.fn();
        mockStatus = jest.fn().mockReturnValue({ json: mockJson });
        mockResponse = {
            status: mockStatus,
            json: mockJson
        };
        // Reset de todos los mocks
        jest.clearAllMocks();
    });
    describe('registerController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    name: 'Juan',
                    lastName: 'Pérez',
                    roll: 'musico',
                    userEmail: 'juan@example.com',
                    userPassword: 'Password123!'
                }
            });
        });
        it('should register user successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock de validaciones
            validatios_1.validarPassword.mockReturnValue(true);
            validatios_1.validarEmail.mockReturnValue(true);
            // Mock de bcrypt
            bcrypt.hash.mockResolvedValue('hashedPassword');
            // Mock del modelo - registerModel retorna false cuando es exitoso
            authModel_1.registerModel.mockResolvedValue(false);
            // Mock del usuario creado
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                name: 'Juan',
                lastName: 'Pérez',
                roll: 'musico',
                userEmail: 'juan@example.com'
            });
            jwt_1.createToken.mockReturnValue('mockToken');
            yield (0, authController_1.registerController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(200);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Usuario Registrado con éxito.',
                token: 'mockToken',
                user: expect.objectContaining({
                    id: 'user123',
                    name: 'Juan',
                    lastName: 'Pérez',
                    roll: 'musico',
                    userEmail: 'juan@example.com'
                })
            });
        }));
        it('should return error when required fields are missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    name: 'Juan',
                    lastName: 'Pérez',
                    // roll, userEmail, userPassword faltantes
                }
            });
            yield (0, authController_1.registerController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Error al registrarse, todos los campos deben de ser llenados'
            });
        }));
        it('should return error when password is invalid', () => __awaiter(void 0, void 0, void 0, function* () {
            validatios_1.validarPassword.mockReturnValue(false);
            yield (0, authController_1.registerController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: expect.stringContaining('La contraseña no cumple con los requisitos')
            });
        }));
        it('should return error when email is invalid', () => __awaiter(void 0, void 0, void 0, function* () {
            validatios_1.validarPassword.mockReturnValue(true);
            validatios_1.validarEmail.mockReturnValue(false);
            yield (0, authController_1.registerController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Correo Electrónico inválido.'
            });
        }));
        it('should return error when user already exists', () => __awaiter(void 0, void 0, void 0, function* () {
            validatios_1.validarPassword.mockReturnValue(true);
            validatios_1.validarEmail.mockReturnValue(true);
            bcrypt.hash.mockResolvedValue('hashedPassword');
            // Mock que el usuario ya existe
            authModel_1.registerModel.mockResolvedValue('El usuario ya Existe.');
            yield (0, authController_1.registerController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(409);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Ya hay un usuario con esta direccion de correo electrónico.',
                data: 'El usuario ya Existe.'
            });
        }));
        it('should return error when registration fails', () => __awaiter(void 0, void 0, void 0, function* () {
            validatios_1.validarPassword.mockReturnValue(true);
            validatios_1.validarEmail.mockReturnValue(true);
            bcrypt.hash.mockResolvedValue('hashedPassword');
            authModel_1.registerModel.mockRejectedValue(new Error('Database error'));
            yield (0, authController_1.registerController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Error al registrarse.',
                error: expect.any(Error)
            });
        }));
    });
    describe('loginController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com',
                    userPassword: 'Password123!'
                }
            });
        });
        it('should login user successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockUser = {
                id: 'user123',
                name: 'Juan',
                lastName: 'Pérez',
                roll: 'musico',
                userEmail: 'juan@example.com',
                userPassword: 'hashedPassword'
            };
            validatios_1.validarEmail.mockReturnValue(true);
            authModel_1.getUserByEmailModel.mockResolvedValue(mockUser);
            bcrypt.compare.mockResolvedValue(true);
            jwt_1.createToken.mockReturnValue('mockToken');
            yield (0, authController_1.loginController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(200);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Login Exitoso',
                token: 'mockToken',
                user: mockUser
            });
        }));
        it('should return error when required fields are missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com'
                    // userPassword faltante
                }
            });
            yield (0, authController_1.loginController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Todos los campos deben de ser llenados.'
            });
        }));
        it('should return error when email is invalid', () => __awaiter(void 0, void 0, void 0, function* () {
            validatios_1.validarEmail.mockReturnValue(false);
            yield (0, authController_1.loginController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Dirección de correo electrónico no válido.'
            });
        }));
        it('should return error when user not found', () => __awaiter(void 0, void 0, void 0, function* () {
            validatios_1.validarEmail.mockReturnValue(true);
            authModel_1.getUserByEmailModel.mockResolvedValue(null);
            yield (0, authController_1.loginController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(401);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Verifique su dirección de correo electrónico o regístrese si no tiene una cuenta.'
            });
        }));
        it('should return error when password is incorrect', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockUser = {
                id: 'user123',
                name: 'Juan',
                lastName: 'Pérez',
                roll: 'musico',
                userEmail: 'juan@example.com',
                userPassword: 'hashedPassword'
            };
            validatios_1.validarEmail.mockReturnValue(true);
            authModel_1.getUserByEmailModel.mockResolvedValue(mockUser);
            bcrypt.compare.mockResolvedValue(false);
            yield (0, authController_1.loginController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(401);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Contraseña incorrecta.'
            });
        }));
    });
    describe('requestEmailVerificationController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    name: 'Juan',
                    lastName: 'Pérez',
                    userEmail: 'juan@example.com',
                    userPassword: 'Password123!',
                    roll: 'musico'
                }
            });
        });
        it('should request email verification successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock de validaciones
            validatios_1.validarEmail.mockReturnValue(true);
            validatios_1.validarPassword.mockReturnValue(true);
            // Mock que el usuario no existe
            authModel_1.getUserByEmailModel.mockResolvedValue(null);
            mailer_1.sendEmail.mockResolvedValue(true);
            yield (0, authController_1.requestEmailVerificationController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(200);
            expect(mockJson).toHaveBeenCalledWith({
                success: true,
                message: 'Email de verificación enviado exitosamente. Revisa tu bandeja de entrada.',
                data: expect.objectContaining({
                    userEmail: 'juan@example.com',
                    roll: 'musico',
                    expiresIn: '15 minutos'
                })
            });
        }));
        it('should return error when email sending fails', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock de validaciones
            validatios_1.validarEmail.mockReturnValue(true);
            validatios_1.validarPassword.mockReturnValue(true);
            // Mock que el usuario no existe
            authModel_1.getUserByEmailModel.mockResolvedValue(null);
            mailer_1.sendEmail.mockRejectedValue(new Error('Email sending failed'));
            yield (0, authController_1.requestEmailVerificationController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(500);
            expect(mockJson).toHaveBeenCalledWith({
                success: false,
                message: 'Error interno del servidor',
                error: 'Email sending failed'
            });
        }));
        it('should return error when user already exists', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock de validaciones
            validatios_1.validarEmail.mockReturnValue(true);
            validatios_1.validarPassword.mockReturnValue(true);
            // Mock que el usuario ya existe
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                userEmail: 'juan@example.com'
            });
            yield (0, authController_1.requestEmailVerificationController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(409);
            expect(mockJson).toHaveBeenCalledWith({
                success: false,
                message: 'Ya existe un usuario con este email'
            });
        }));
    });
    describe('verifyAndCompleteRegistrationController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com',
                    verificationCode: '123456'
                }
            });
        });
        it('should complete registration successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            const mockUser = {
                id: 'user123',
                name: 'Juan',
                lastName: 'Pérez',
                roll: 'musico',
                userEmail: 'juan@example.com'
            };
            authModel_1.registerModel.mockResolvedValue(mockUser);
            jwt_1.createToken.mockReturnValue('mockToken');
            yield (0, authController_1.verifyAndCompleteRegistrationController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                success: false,
                message: 'Email y código son requeridos'
            });
        }));
        it('should return error when verification code is invalid', () => __awaiter(void 0, void 0, void 0, function* () {
            yield (0, authController_1.verifyAndCompleteRegistrationController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                success: false,
                message: 'Email y código son requeridos'
            });
        }));
        it('should return error when required fields are missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com'
                    // verificationCode faltante
                }
            });
            yield (0, authController_1.verifyAndCompleteRegistrationController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                success: false,
                message: 'Email y código son requeridos'
            });
        }));
    });
    describe('forgotPasswordController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com'
                }
            });
        });
        it('should send password reset email successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock que el usuario existe y es superadmin
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                userEmail: 'juan@example.com',
                roll: 'superadmin'
            });
            mailer_1.sendEmail.mockResolvedValue(true);
            yield (0, authController_1.forgotPasswordController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(200);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Código de verificación enviado al email',
                userEmail: 'juan@example.com'
            });
        }));
        it('should return error when user is not superadmin', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock que el usuario existe pero no es superadmin
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                userEmail: 'juan@example.com',
                roll: 'usuario'
            });
            yield (0, authController_1.forgotPasswordController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(403);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Solo superadmin puede recuperar contraseña'
            });
        }));
    });
    describe('verifyCodeController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com',
                    code: '123456'
                }
            });
        });
        it('should return error when user not found', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.getUserByEmailModel.mockResolvedValue(null);
            yield (0, authController_1.verifyCodeController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(404);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Usuario no encontrado'
            });
        }));
        it('should return error when user is not superadmin', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock que el usuario existe pero no es superadmin
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                userEmail: 'juan@example.com',
                roll: 'usuario'
            });
            yield (0, authController_1.verifyCodeController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(403);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Solo superadmin puede recuperar contraseña'
            });
        }));
        it('should return error when required fields are missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com'
                    // code faltante
                }
            });
            yield (0, authController_1.verifyCodeController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Email y código son requeridos'
            });
        }));
    });
    describe('resetPasswordController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com',
                    code: '123456',
                    newPassword: 'NewPassword123!'
                }
            });
        });
        it('should return error when user is not superadmin', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock que el usuario existe pero no es superadmin
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                userEmail: 'juan@example.com',
                roll: 'usuario'
            });
            yield (0, authController_1.resetPasswordController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(403);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Solo superadmin puede recuperar contraseña'
            });
        }));
        it('should return error when required fields are missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com'
                    // code y newPassword faltantes
                }
            });
            yield (0, authController_1.resetPasswordController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Email, código y nueva contraseña son requeridos'
            });
        }));
        it('should return error when password is invalid', () => __awaiter(void 0, void 0, void 0, function* () {
            // Mock que el usuario existe y es superadmin
            authModel_1.getUserByEmailModel.mockResolvedValue({
                id: 'user123',
                userEmail: 'juan@example.com',
                roll: 'superadmin'
            });
            validatios_1.validarPassword.mockReturnValue(false);
            yield (0, authController_1.resetPasswordController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'La contraseña no cumple con los requisitos, debe de contener Mayúsculas, Minúsculas, Números y Carácteres especiales'
            });
        }));
    });
    describe('updateUserByEmailController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    name: 'Juan Updated',
                    lastName: 'Pérez Updated'
                },
                params: {
                    userEmail: 'juan@example.com'
                }
            });
        });
        it('should update user successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.updateUserByEmailModel.mockResolvedValue(false); // false significa éxito
            yield (0, authController_1.updateUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(200);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Consulta éxitosa'
            });
        }));
        it('should return error when update fails', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.updateUserByEmailModel.mockResolvedValue('Error al actualizar');
            yield (0, authController_1.updateUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(401);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Error al actualizar'
            });
        }));
        it('should return error when email is missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    name: 'Juan Updated',
                    lastName: 'Pérez Updated'
                },
                params: {} // Sin userEmail
            });
            yield (0, authController_1.updateUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(401);
            expect(mockJson).toHaveBeenCalledWith({
                msg: 'Error al actualizar el usuario.'
            });
        }));
    });
    describe('deleteUserByEmailController', () => {
        beforeEach(() => {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {
                    userEmail: 'juan@example.com'
                }
            });
        });
        it('should delete user successfully', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.deleteUserByEmailModel.mockResolvedValue(false); // false significa éxito
            yield (0, authController_1.deleteUserByEmailController)(mockRequest, mockResponse);
            // El controlador usa res.json() directamente cuando es exitoso, no res.status(200).json()
            expect(mockJson).toHaveBeenCalledWith({
                message: 'Usuario eliminado correctamente'
            });
        }));
        it('should return error when user not found', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.deleteUserByEmailModel.mockResolvedValue('not_found');
            yield (0, authController_1.deleteUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(404);
            expect(mockJson).toHaveBeenCalledWith({
                message: 'El usuario no existe o ya fue eliminado'
            });
        }));
        it('should return error when email is missing', () => __awaiter(void 0, void 0, void 0, function* () {
            mockRequest = (0, setup_1.createMockRequest)({
                body: {} // Sin userEmail
            });
            yield (0, authController_1.deleteUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                message: 'Falta el email'
            });
        }));
        it('should return error when model returns "Falta el email"', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.deleteUserByEmailModel.mockResolvedValue('Falta el email');
            yield (0, authController_1.deleteUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(400);
            expect(mockJson).toHaveBeenCalledWith({
                message: 'Falta el email'
            });
        }));
        it('should return error when model returns other error', () => __awaiter(void 0, void 0, void 0, function* () {
            authModel_1.deleteUserByEmailModel.mockResolvedValue('Error de base de datos');
            yield (0, authController_1.deleteUserByEmailController)(mockRequest, mockResponse);
            expect(mockStatus).toHaveBeenCalledWith(500);
            expect(mockJson).toHaveBeenCalledWith({
                message: 'Error de base de datos'
            });
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXHNyY1xcQVBQX011c3Npa09uXFxBUFBfTXVzc2lrT25fRXhwcmVzc1xcc3JjXFxfX3Rlc3RzX19cXGF1dGhDb250cm9sbGVyLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3QkEsaUNBQWlDO0FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQTVCcEIsK0NBQWlDO0FBQ2pDLGtFQVV1QztBQUN2QyxtREFLNkI7QUFDN0Isc0NBQTJDO0FBQzNDLDRDQUE0QztBQUM1QyxvREFBb0U7QUFDcEUsbUNBQWdFO0FBU2hFLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7SUFDOUIsSUFBSSxXQUE2QixDQUFDO0lBQ2xDLElBQUksWUFBK0IsQ0FBQztJQUNwQyxJQUFJLFFBQW1CLENBQUM7SUFDeEIsSUFBSSxVQUFxQixDQUFDO0lBRTFCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3JCLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFFM0QsWUFBWSxHQUFHO1lBQ2IsTUFBTSxFQUFFLFVBQVU7WUFDbEIsSUFBSSxFQUFFLFFBQVE7U0FDZixDQUFDO1FBRUYsMkJBQTJCO1FBQzNCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxvQkFBb0IsRUFB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Q0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG9EQUFvRCxFQUFFLEdBQVMsRUFBRTtZQUNqRSxrQ0FBb0MsQ0FBQyxpQkFBaUIsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1lBRWxGLE1BQU0sSUFBQSw0Q0FBMkIsRUFBQyxXQUFzQixFQUFFLFlBQXdCLENBQUMsQ0FBQztZQUVwRixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLG9CQUFvQixDQUFDO2dCQUNwQyxPQUFPLEVBQUUsd0JBQXdCO2FBQ2xDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxzcmNcXEFQUF9NdXNzaWtPblxcQVBQX011c3Npa09uX0V4cHJlc3NcXHNyY1xcX190ZXN0c19fXFxhdXRoQ29udHJvbGxlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCAqIGFzIGJjcnlwdCBmcm9tICdiY3J5cHQnO1xyXG5pbXBvcnQge1xyXG4gIHJlZ2lzdGVyQ29udHJvbGxlcixcclxuICBsb2dpbkNvbnRyb2xsZXIsXHJcbiAgcmVxdWVzdEVtYWlsVmVyaWZpY2F0aW9uQ29udHJvbGxlcixcclxuICB2ZXJpZnlBbmRDb21wbGV0ZVJlZ2lzdHJhdGlvbkNvbnRyb2xsZXIsXHJcbiAgZm9yZ290UGFzc3dvcmRDb250cm9sbGVyLFxyXG4gIHZlcmlmeUNvZGVDb250cm9sbGVyLFxyXG4gIHJlc2V0UGFzc3dvcmRDb250cm9sbGVyLFxyXG4gIHVwZGF0ZVVzZXJCeUVtYWlsQ29udHJvbGxlcixcclxuICBkZWxldGVVc2VyQnlFbWFpbENvbnRyb2xsZXJcclxufSBmcm9tICcuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcic7XHJcbmltcG9ydCB7XHJcbiAgZ2V0VXNlckJ5RW1haWxNb2RlbCxcclxuICByZWdpc3Rlck1vZGVsLFxyXG4gIHVwZGF0ZVVzZXJCeUVtYWlsTW9kZWwsXHJcbiAgZGVsZXRlVXNlckJ5RW1haWxNb2RlbFxyXG59IGZyb20gJy4uL21vZGVscy9hdXRoTW9kZWwnO1xyXG5pbXBvcnQgeyBjcmVhdGVUb2tlbiB9IGZyb20gJy4uL3V0aWxzL2p3dCc7XHJcbmltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJy4uL3V0aWxzL21haWxlcic7XHJcbmltcG9ydCB7IHZhbGlkYXJFbWFpbCwgdmFsaWRhclBhc3N3b3JkIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvcyc7XHJcbmltcG9ydCB7IGNyZWF0ZU1vY2tSZXF1ZXN0LCBjcmVhdGVNb2NrUmVzcG9uc2UgfSBmcm9tICcuL3NldHVwJztcclxuXHJcbi8vIE1vY2sgZGUgdG9kYXMgbGFzIGRlcGVuZGVuY2lhc1xyXG5qZXN0Lm1vY2soJy4uL21vZGVscy9hdXRoTW9kZWwnKTtcclxuamVzdC5tb2NrKCcuLi91dGlscy9qd3QnKTtcclxuamVzdC5tb2NrKCcuLi91dGlscy9tYWlsZXInKTtcclxuamVzdC5tb2NrKCcuLi91dGlscy92YWxpZGF0aW9zJyk7XHJcbmplc3QubW9jaygnYmNyeXB0Jyk7XHJcblxyXG5kZXNjcmliZSgnQXV0aENvbnRyb2xsZXInLCAoKSA9PiB7XHJcbiAgbGV0IG1vY2tSZXF1ZXN0OiBQYXJ0aWFsPFJlcXVlc3Q+O1xyXG4gIGxldCBtb2NrUmVzcG9uc2U6IFBhcnRpYWw8UmVzcG9uc2U+O1xyXG4gIGxldCBtb2NrSnNvbjogamVzdC5Nb2NrO1xyXG4gIGxldCBtb2NrU3RhdHVzOiBqZXN0Lk1vY2s7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgbW9ja0pzb24gPSBqZXN0LmZuKCk7XHJcbiAgICBtb2NrU3RhdHVzID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGpzb246IG1vY2tKc29uIH0pO1xyXG4gICAgXHJcbiAgICBtb2NrUmVzcG9uc2UgPSB7XHJcbiAgICAgIHN0YXR1czogbW9ja1N0YXR1cyxcclxuICAgICAganNvbjogbW9ja0pzb25cclxuICAgIH07XHJcblxyXG4gICAgLy8gUmVzZXQgZGUgdG9kb3MgbG9zIG1vY2tzXHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3JlZ2lzdGVyQ29udHJvbGxlcicsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrUmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBuYW1lOiAnSnVhbicsXHJcbiAgICAgICAgICBsYXN0TmFtZTogJ1DDqXJleicsXHJcbiAgICAgICAgICByb2xsOiAnbXVzaWNvJyxcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgdXNlclBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIHVzZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIGRlIHZhbGlkYWNpb25lc1xyXG4gICAgICAodmFsaWRhclBhc3N3b3JkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAodmFsaWRhckVtYWlsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgLy8gTW9jayBkZSBiY3J5cHRcclxuICAgICAgKGJjcnlwdC5oYXNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoJ2hhc2hlZFBhc3N3b3JkJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNb2NrIGRlbCBtb2RlbG8gLSByZWdpc3Rlck1vZGVsIHJldG9ybmEgZmFsc2UgY3VhbmRvIGVzIGV4aXRvc29cclxuICAgICAgKHJlZ2lzdGVyTW9kZWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNb2NrIGRlbCB1c3VhcmlvIGNyZWFkb1xyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ3VzZXIxMjMnLFxyXG4gICAgICAgIG5hbWU6ICdKdWFuJyxcclxuICAgICAgICBsYXN0TmFtZTogJ1DDqXJleicsXHJcbiAgICAgICAgcm9sbDogJ211c2ljbycsXHJcbiAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbSdcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICAoY3JlYXRlVG9rZW4gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoJ21vY2tUb2tlbicpO1xyXG5cclxuICAgICAgYXdhaXQgcmVnaXN0ZXJDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnVXN1YXJpbyBSZWdpc3RyYWRvIGNvbiDDqXhpdG8uJyxcclxuICAgICAgICB0b2tlbjogJ21vY2tUb2tlbicsXHJcbiAgICAgICAgdXNlcjogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgaWQ6ICd1c2VyMTIzJyxcclxuICAgICAgICAgIG5hbWU6ICdKdWFuJyxcclxuICAgICAgICAgIGxhc3ROYW1lOiAnUMOpcmV6JyxcclxuICAgICAgICAgIHJvbGw6ICdtdXNpY28nLFxyXG4gICAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbSdcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrUmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBuYW1lOiAnSnVhbicsXHJcbiAgICAgICAgICBsYXN0TmFtZTogJ1DDqXJleicsXHJcbiAgICAgICAgICAvLyByb2xsLCB1c2VyRW1haWwsIHVzZXJQYXNzd29yZCBmYWx0YW50ZXNcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgcmVnaXN0ZXJDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnRXJyb3IgYWwgcmVnaXN0cmFyc2UsIHRvZG9zIGxvcyBjYW1wb3MgZGViZW4gZGUgc2VyIGxsZW5hZG9zJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gcGFzc3dvcmQgaXMgaW52YWxpZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgKHZhbGlkYXJQYXNzd29yZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XHJcblxyXG4gICAgICBhd2FpdCByZWdpc3RlckNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdMYSBjb250cmFzZcOxYSBubyBjdW1wbGUgY29uIGxvcyByZXF1aXNpdG9zJylcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIGVtYWlsIGlzIGludmFsaWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICh2YWxpZGFyUGFzc3dvcmQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XHJcbiAgICAgICh2YWxpZGFyRW1haWwgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xyXG5cclxuICAgICAgYXdhaXQgcmVnaXN0ZXJDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnQ29ycmVvIEVsZWN0csOzbmljbyBpbnbDoWxpZG8uJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gdXNlciBhbHJlYWR5IGV4aXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgKHZhbGlkYXJQYXNzd29yZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcclxuICAgICAgKHZhbGlkYXJFbWFpbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcclxuICAgICAgKGJjcnlwdC5oYXNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoJ2hhc2hlZFBhc3N3b3JkJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNb2NrIHF1ZSBlbCB1c3VhcmlvIHlhIGV4aXN0ZVxyXG4gICAgICAocmVnaXN0ZXJNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKCdFbCB1c3VhcmlvIHlhIEV4aXN0ZS4nKTtcclxuXHJcbiAgICAgIGF3YWl0IHJlZ2lzdGVyQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwOSk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIG1zZzogJ1lhIGhheSB1biB1c3VhcmlvIGNvbiBlc3RhIGRpcmVjY2lvbiBkZSBjb3JyZW8gZWxlY3Ryw7NuaWNvLicsXHJcbiAgICAgICAgZGF0YTogJ0VsIHVzdWFyaW8geWEgRXhpc3RlLidcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHJlZ2lzdHJhdGlvbiBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgICAgKHZhbGlkYXJQYXNzd29yZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcclxuICAgICAgKHZhbGlkYXJFbWFpbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcclxuICAgICAgKGJjcnlwdC5oYXNoIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoJ2hhc2hlZFBhc3N3b3JkJyk7XHJcbiAgICAgIFxyXG4gICAgICAocmVnaXN0ZXJNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKSk7XHJcblxyXG4gICAgICBhd2FpdCByZWdpc3RlckNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdFcnJvciBhbCByZWdpc3RyYXJzZS4nLFxyXG4gICAgICAgIGVycm9yOiBleHBlY3QuYW55KEVycm9yKVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbG9naW5Db250cm9sbGVyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tSZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgdXNlclBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvZ2luIHVzZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrVXNlciA9IHtcclxuICAgICAgICBpZDogJ3VzZXIxMjMnLFxyXG4gICAgICAgIG5hbWU6ICdKdWFuJyxcclxuICAgICAgICBsYXN0TmFtZTogJ1DDqXJleicsXHJcbiAgICAgICAgcm9sbDogJ211c2ljbycsXHJcbiAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgdXNlclBhc3N3b3JkOiAnaGFzaGVkUGFzc3dvcmQnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAodmFsaWRhckVtYWlsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcclxuICAgICAgKGJjcnlwdC5jb21wYXJlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XHJcbiAgICAgIChjcmVhdGVUb2tlbiBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSgnbW9ja1Rva2VuJyk7XHJcblxyXG4gICAgICBhd2FpdCBsb2dpbkNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgyMDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdMb2dpbiBFeGl0b3NvJyxcclxuICAgICAgICB0b2tlbjogJ21vY2tUb2tlbicsXHJcbiAgICAgICAgdXNlcjogbW9ja1VzZXJcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1JlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7XHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbSdcclxuICAgICAgICAgIC8vIHVzZXJQYXNzd29yZCBmYWx0YW50ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBsb2dpbkNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdUb2RvcyBsb3MgY2FtcG9zIGRlYmVuIGRlIHNlciBsbGVuYWRvcy4nXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiBlbWFpbCBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAodmFsaWRhckVtYWlsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcclxuXHJcbiAgICAgIGF3YWl0IGxvZ2luQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIG1zZzogJ0RpcmVjY2nDs24gZGUgY29ycmVvIGVsZWN0csOzbmljbyBubyB2w6FsaWRvLidcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHVzZXIgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAodmFsaWRhckVtYWlsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgYXdhaXQgbG9naW5Db250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAxKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnVmVyaWZpcXVlIHN1IGRpcmVjY2nDs24gZGUgY29ycmVvIGVsZWN0csOzbmljbyBvIHJlZ8Otc3RyZXNlIHNpIG5vIHRpZW5lIHVuYSBjdWVudGEuJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gcGFzc3dvcmQgaXMgaW5jb3JyZWN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrVXNlciA9IHtcclxuICAgICAgICBpZDogJ3VzZXIxMjMnLFxyXG4gICAgICAgIG5hbWU6ICdKdWFuJyxcclxuICAgICAgICBsYXN0TmFtZTogJ1DDqXJleicsXHJcbiAgICAgICAgcm9sbDogJ211c2ljbycsXHJcbiAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgdXNlclBhc3N3b3JkOiAnaGFzaGVkUGFzc3dvcmQnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAodmFsaWRhckVtYWlsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcclxuICAgICAgKGJjcnlwdC5jb21wYXJlIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoZmFsc2UpO1xyXG5cclxuICAgICAgYXdhaXQgbG9naW5Db250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAxKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnQ29udHJhc2XDsWEgaW5jb3JyZWN0YS4nXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdyZXF1ZXN0RW1haWxWZXJpZmljYXRpb25Db250cm9sbGVyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tSZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIG5hbWU6ICdKdWFuJyxcclxuICAgICAgICAgIGxhc3ROYW1lOiAnUMOpcmV6JyxcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgdXNlclBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJyxcclxuICAgICAgICAgIHJvbGw6ICdtdXNpY28nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVxdWVzdCBlbWFpbCB2ZXJpZmljYXRpb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIGRlIHZhbGlkYWNpb25lc1xyXG4gICAgICAodmFsaWRhckVtYWlsIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICAodmFsaWRhclBhc3N3b3JkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgLy8gTW9jayBxdWUgZWwgdXN1YXJpbyBubyBleGlzdGVcclxuICAgICAgKGdldFVzZXJCeUVtYWlsTW9kZWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuICAgICAgKHNlbmRFbWFpbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xyXG5cclxuICAgICAgYXdhaXQgcmVxdWVzdEVtYWlsVmVyaWZpY2F0aW9uQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIwMCk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogJ0VtYWlsIGRlIHZlcmlmaWNhY2nDs24gZW52aWFkbyBleGl0b3NhbWVudGUuIFJldmlzYSB0dSBiYW5kZWphIGRlIGVudHJhZGEuJyxcclxuICAgICAgICBkYXRhOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICB1c2VyRW1haWw6ICdqdWFuQGV4YW1wbGUuY29tJyxcclxuICAgICAgICAgIHJvbGw6ICdtdXNpY28nLFxyXG4gICAgICAgICAgZXhwaXJlc0luOiAnMTUgbWludXRvcydcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gZW1haWwgc2VuZGluZyBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gTW9jayBkZSB2YWxpZGFjaW9uZXNcclxuICAgICAgKHZhbGlkYXJFbWFpbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcclxuICAgICAgKHZhbGlkYXJQYXNzd29yZCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1vY2sgcXVlIGVsIHVzdWFyaW8gbm8gZXhpc3RlXHJcbiAgICAgIChnZXRVc2VyQnlFbWFpbE1vZGVsIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgIChzZW5kRW1haWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0VtYWlsIHNlbmRpbmcgZmFpbGVkJykpO1xyXG5cclxuICAgICAgYXdhaXQgcmVxdWVzdEVtYWlsVmVyaWZpY2F0aW9uQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDUwMCk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicsXHJcbiAgICAgICAgZXJyb3I6ICdFbWFpbCBzZW5kaW5nIGZhaWxlZCdcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHVzZXIgYWxyZWFkeSBleGlzdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgZGUgdmFsaWRhY2lvbmVzXHJcbiAgICAgICh2YWxpZGFyRW1haWwgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XHJcbiAgICAgICh2YWxpZGFyUGFzc3dvcmQgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBNb2NrIHF1ZSBlbCB1c3VhcmlvIHlhIGV4aXN0ZVxyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ3VzZXIxMjMnLFxyXG4gICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgcmVxdWVzdEVtYWlsVmVyaWZpY2F0aW9uQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwOSk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdZYSBleGlzdGUgdW4gdXN1YXJpbyBjb24gZXN0ZSBlbWFpbCdcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3ZlcmlmeUFuZENvbXBsZXRlUmVnaXN0cmF0aW9uQ29udHJvbGxlcicsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrUmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICB1c2VyRW1haWw6ICdqdWFuQGV4YW1wbGUuY29tJyxcclxuICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGU6ICcxMjM0NTYnXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY29tcGxldGUgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7XHJcbiAgICAgICAgaWQ6ICd1c2VyMTIzJyxcclxuICAgICAgICBuYW1lOiAnSnVhbicsXHJcbiAgICAgICAgbGFzdE5hbWU6ICdQw6lyZXonLFxyXG4gICAgICAgIHJvbGw6ICdtdXNpY28nLFxyXG4gICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAocmVnaXN0ZXJNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcclxuICAgICAgKGNyZWF0ZVRva2VuIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKCdtb2NrVG9rZW4nKTtcclxuXHJcbiAgICAgIGF3YWl0IHZlcmlmeUFuZENvbXBsZXRlUmVnaXN0cmF0aW9uQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdFbWFpbCB5IGPDs2RpZ28gc29uIHJlcXVlcmlkb3MnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiB2ZXJpZmljYXRpb24gY29kZSBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB2ZXJpZnlBbmRDb21wbGV0ZVJlZ2lzdHJhdGlvbkNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnRW1haWwgeSBjw7NkaWdvIHNvbiByZXF1ZXJpZG9zJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gcmVxdWlyZWQgZmllbGRzIGFyZSBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrUmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICB1c2VyRW1haWw6ICdqdWFuQGV4YW1wbGUuY29tJ1xyXG4gICAgICAgICAgLy8gdmVyaWZpY2F0aW9uQ29kZSBmYWx0YW50ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCB2ZXJpZnlBbmRDb21wbGV0ZVJlZ2lzdHJhdGlvbkNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiAnRW1haWwgeSBjw7NkaWdvIHNvbiByZXF1ZXJpZG9zJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZm9yZ290UGFzc3dvcmRDb250cm9sbGVyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tSZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2VuZCBwYXNzd29yZCByZXNldCBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgcXVlIGVsIHVzdWFyaW8gZXhpc3RlIHkgZXMgc3VwZXJhZG1pblxyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ3VzZXIxMjMnLFxyXG4gICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgIHJvbGw6ICdzdXBlcmFkbWluJ1xyXG4gICAgICB9KTtcclxuICAgICAgKHNlbmRFbWFpbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xyXG5cclxuICAgICAgYXdhaXQgZm9yZ290UGFzc3dvcmRDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnQ8OzZGlnbyBkZSB2ZXJpZmljYWNpw7NuIGVudmlhZG8gYWwgZW1haWwnLFxyXG4gICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiB1c2VyIGlzIG5vdCBzdXBlcmFkbWluJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIHF1ZSBlbCB1c3VhcmlvIGV4aXN0ZSBwZXJvIG5vIGVzIHN1cGVyYWRtaW5cclxuICAgICAgKGdldFVzZXJCeUVtYWlsTW9kZWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6ICd1c2VyMTIzJyxcclxuICAgICAgICB1c2VyRW1haWw6ICdqdWFuQGV4YW1wbGUuY29tJyxcclxuICAgICAgICByb2xsOiAndXN1YXJpbydcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCBmb3Jnb3RQYXNzd29yZENvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDMpO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdTb2xvIHN1cGVyYWRtaW4gcHVlZGUgcmVjdXBlcmFyIGNvbnRyYXNlw7FhJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgndmVyaWZ5Q29kZUNvbnRyb2xsZXInLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1JlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7XHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICBjb2RlOiAnMTIzNDU2J1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHVzZXIgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgYXdhaXQgdmVyaWZ5Q29kZUNvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdVc3VhcmlvIG5vIGVuY29udHJhZG8nXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiB1c2VyIGlzIG5vdCBzdXBlcmFkbWluJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIHF1ZSBlbCB1c3VhcmlvIGV4aXN0ZSBwZXJvIG5vIGVzIHN1cGVyYWRtaW5cclxuICAgICAgKGdldFVzZXJCeUVtYWlsTW9kZWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgaWQ6ICd1c2VyMTIzJyxcclxuICAgICAgICB1c2VyRW1haWw6ICdqdWFuQGV4YW1wbGUuY29tJyxcclxuICAgICAgICByb2xsOiAndXN1YXJpbydcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCB2ZXJpZnlDb2RlQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMyk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIG1zZzogJ1NvbG8gc3VwZXJhZG1pbiBwdWVkZSByZWN1cGVyYXIgY29udHJhc2XDsWEnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiByZXF1aXJlZCBmaWVsZHMgYXJlIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tSZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgICAgICAvLyBjb2RlIGZhbHRhbnRlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IHZlcmlmeUNvZGVDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnRW1haWwgeSBjw7NkaWdvIHNvbiByZXF1ZXJpZG9zJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncmVzZXRQYXNzd29yZENvbnRyb2xsZXInLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja1JlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7XHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICBjb2RlOiAnMTIzNDU2JyxcclxuICAgICAgICAgIG5ld1Bhc3N3b3JkOiAnTmV3UGFzc3dvcmQxMjMhJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHVzZXIgaXMgbm90IHN1cGVyYWRtaW4nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgcXVlIGVsIHVzdWFyaW8gZXhpc3RlIHBlcm8gbm8gZXMgc3VwZXJhZG1pblxyXG4gICAgICAoZ2V0VXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBpZDogJ3VzZXIxMjMnLFxyXG4gICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nLFxyXG4gICAgICAgIHJvbGw6ICd1c3VhcmlvJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IHJlc2V0UGFzc3dvcmRDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAzKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnU29sbyBzdXBlcmFkbWluIHB1ZWRlIHJlY3VwZXJhciBjb250cmFzZcOxYSdcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIHJlcXVpcmVkIGZpZWxkcyBhcmUgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1JlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7XHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbSdcclxuICAgICAgICAgIC8vIGNvZGUgeSBuZXdQYXNzd29yZCBmYWx0YW50ZXNcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgcmVzZXRQYXNzd29yZENvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdFbWFpbCwgY8OzZGlnbyB5IG51ZXZhIGNvbnRyYXNlw7FhIHNvbiByZXF1ZXJpZG9zJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gcGFzc3dvcmQgaXMgaW52YWxpZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gTW9jayBxdWUgZWwgdXN1YXJpbyBleGlzdGUgeSBlcyBzdXBlcmFkbWluXHJcbiAgICAgIChnZXRVc2VyQnlFbWFpbE1vZGVsIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIGlkOiAndXNlcjEyMycsXHJcbiAgICAgICAgdXNlckVtYWlsOiAnanVhbkBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgcm9sbDogJ3N1cGVyYWRtaW4nXHJcbiAgICAgIH0pO1xyXG4gICAgICAodmFsaWRhclBhc3N3b3JkIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcclxuXHJcbiAgICAgIGF3YWl0IHJlc2V0UGFzc3dvcmRDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnTGEgY29udHJhc2XDsWEgbm8gY3VtcGxlIGNvbiBsb3MgcmVxdWlzaXRvcywgZGViZSBkZSBjb250ZW5lciBNYXnDunNjdWxhcywgTWluw7pzY3VsYXMsIE7Dum1lcm9zIHkgQ2Fyw6FjdGVyZXMgZXNwZWNpYWxlcydcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3VwZGF0ZVVzZXJCeUVtYWlsQ29udHJvbGxlcicsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrUmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBuYW1lOiAnSnVhbiBVcGRhdGVkJyxcclxuICAgICAgICAgIGxhc3ROYW1lOiAnUMOpcmV6IFVwZGF0ZWQnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHVzZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAodXBkYXRlVXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKGZhbHNlKTsgLy8gZmFsc2Ugc2lnbmlmaWNhIMOpeGl0b1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlVXNlckJ5RW1haWxDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbXNnOiAnQ29uc3VsdGEgw6l4aXRvc2EnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiB1cGRhdGUgZmFpbHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICh1cGRhdGVVc2VyQnlFbWFpbE1vZGVsIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoJ0Vycm9yIGFsIGFjdHVhbGl6YXInKTtcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZVVzZXJCeUVtYWlsQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMSk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIG1zZzogJ0Vycm9yIGFsIGFjdHVhbGl6YXInXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiBlbWFpbCBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrUmVxdWVzdCA9IGNyZWF0ZU1vY2tSZXF1ZXN0KHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBuYW1lOiAnSnVhbiBVcGRhdGVkJyxcclxuICAgICAgICAgIGxhc3ROYW1lOiAnUMOpcmV6IFVwZGF0ZWQnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXJhbXM6IHt9IC8vIFNpbiB1c2VyRW1haWxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVVc2VyQnlFbWFpbENvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDEpO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtc2c6ICdFcnJvciBhbCBhY3R1YWxpemFyIGVsIHVzdWFyaW8uJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZGVsZXRlVXNlckJ5RW1haWxDb250cm9sbGVyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tSZXF1ZXN0ID0gY3JlYXRlTW9ja1JlcXVlc3Qoe1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIHVzZXJFbWFpbDogJ2p1YW5AZXhhbXBsZS5jb20nXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGVsZXRlIHVzZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAoZGVsZXRlVXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKGZhbHNlKTsgLy8gZmFsc2Ugc2lnbmlmaWNhIMOpeGl0b1xyXG5cclxuICAgICAgYXdhaXQgZGVsZXRlVXNlckJ5RW1haWxDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICAvLyBFbCBjb250cm9sYWRvciB1c2EgcmVzLmpzb24oKSBkaXJlY3RhbWVudGUgY3VhbmRvIGVzIGV4aXRvc28sIG5vIHJlcy5zdGF0dXMoMjAwKS5qc29uKClcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbWVzc2FnZTogJ1VzdWFyaW8gZWxpbWluYWRvIGNvcnJlY3RhbWVudGUnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3Igd2hlbiB1c2VyIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgKGRlbGV0ZVVzZXJCeUVtYWlsTW9kZWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnbm90X2ZvdW5kJyk7XHJcblxyXG4gICAgICBhd2FpdCBkZWxldGVVc2VyQnlFbWFpbENvbnRyb2xsZXIobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xyXG4gICAgICBleHBlY3QobW9ja0pzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBtZXNzYWdlOiAnRWwgdXN1YXJpbyBubyBleGlzdGUgbyB5YSBmdWUgZWxpbWluYWRvJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gZW1haWwgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1JlcXVlc3QgPSBjcmVhdGVNb2NrUmVxdWVzdCh7XHJcbiAgICAgICAgYm9keToge30gLy8gU2luIHVzZXJFbWFpbFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGRlbGV0ZVVzZXJCeUVtYWlsQ29udHJvbGxlcihtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XHJcbiAgICAgIGV4cGVjdChtb2NrSnNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIG1lc3NhZ2U6ICdGYWx0YSBlbCBlbWFpbCdcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciB3aGVuIG1vZGVsIHJldHVybnMgXCJGYWx0YSBlbCBlbWFpbFwiJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAoZGVsZXRlVXNlckJ5RW1haWxNb2RlbCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKCdGYWx0YSBlbCBlbWFpbCcpO1xyXG5cclxuICAgICAgYXdhaXQgZGVsZXRlVXNlckJ5RW1haWxDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbWVzc2FnZTogJ0ZhbHRhIGVsIGVtYWlsJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIHdoZW4gbW9kZWwgcmV0dXJucyBvdGhlciBlcnJvcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgKGRlbGV0ZVVzZXJCeUVtYWlsTW9kZWwgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnRXJyb3IgZGUgYmFzZSBkZSBkYXRvcycpO1xyXG5cclxuICAgICAgYXdhaXQgZGVsZXRlVXNlckJ5RW1haWxDb250cm9sbGVyKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XHJcblxyXG4gICAgICBleHBlY3QobW9ja1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNTAwKTtcclxuICAgICAgZXhwZWN0KG1vY2tKc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGRlIGJhc2UgZGUgZGF0b3MnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyAiXSwidmVyc2lvbiI6M30=